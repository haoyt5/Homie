(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{239:function(e,a,t){},369:function(e,a,t){e.exports=t(772)},595:function(e,a,t){e.exports=t.p+"static/media/temp.7f5580a9.png"},772:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(35),c=t.n(s),o=(t(239),t(9)),l=t(10),i=t(12),u=t(11),m=t(13),p=t(27),d=t(75),h=t(19),g=t(20),f=t(21),E=t(378),b=function(){return function(e,a,t){var n,r,s=t.getFirebase,c=t.getFirestore,o=s(),l=c(),i=new o.auth.GoogleAuthProvider,u=E({luminosity:"bright"});o.auth().signInWithPopup(i).then(function(a){var t=a.additionalUserInfo.profile,s=t.given_name,c=t.family_name,o=t.picture,i=t.email;if(a.additionalUserInfo.isNewUser){n=s||" ",r=c||" ";var m=a.user;l.collection("users").doc(m.uid).set({firstname:s||"",lastname:c||"",initials:n[0]+r[0],photoURL:o,email:i,createAt:l.FieldValue.serverTimestamp(),userColor:u}).then(function(){return window.location.hash="#/signgroup/signup"}).then(function(){return e({type:"LOGIN_SUCCESS"})}).catch(function(a){console.log(a),e({type:"LOGIN_ERROR"},a)})}else l.collection("users").where("email","==",i).get().then(function(a){a.forEach(function(a){a.data().defaultGroup||null?(e({type:"LOGIN_SUCCESS"}),window.location.hash="#/"):(e({type:"LOGIN_SUCCESS"}),window.location.hash="#/signgroup/signup")})}),e({type:"LOGIN_SUCCESS"})}).catch(function(a){console.log("error",a),e({type:"LOGIN_ERROR",error:a})})}},v=Object(h.b)(null,function(e){return{signOut:function(){return e(function(e,a,t){(0,t.getFirebase)().auth().signOut().then(function(){e({type:"SIGNOUT_SUCCESS"})}).then(function(){window.location.hash="#/"})})}}})(function(e){var a=e.profile;return r.a.createElement("div",{className:"signinwrapper"},r.a.createElement(p.c,{to:"/signgroup/signin",className:"link-button"},"Join group"),r.a.createElement(p.c,{to:"/",className:"link-button",onClick:e.signOut},"Log out"),r.a.createElement(p.c,{to:"/",className:"avatar-circle"},a.initials))}),N=function(){return r.a.createElement("div",{className:"signinwrapper"},r.a.createElement(p.c,{to:"/signup",className:"link-button"},"Sign up"),r.a.createElement(p.c,{to:"/signin",className:"link-button "},"Log in"))},k=function(e){function a(){return Object(o.a)(this,a),Object(i.a)(this,Object(u.a)(a).apply(this,arguments))}return Object(m.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){var e=this.props,a=e.auth,t=e.profile,n=a.uid?r.a.createElement(v,{profile:t}):r.a.createElement(N,null);return r.a.createElement("nav",{className:"navwrapper"},r.a.createElement("div",{className:"container"},r.a.createElement(p.b,{to:"/",className:"brandname"},"HOMIE"),n))}}]),a}(n.Component),y=Object(h.b)(function(e){return{auth:e.firebase.auth,profile:e.firebase.profile}})(k),O=function(e){function a(){var e,t;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(i.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(r)))).state={email:"",password:""},t.handleChange=function(e){t.setState(Object(f.a)({},e.target.id,e.target.value))},t.handleSubmit=function(e){e.preventDefault(),t.props.signIn(t.state)},t.handleGoogleLogin=function(e){t.props.googleLogin()},t}return Object(m.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,a=e.auth,t=e.profile;return a.uid&&!t.defaultGroup?r.a.createElement(d.a,{to:"/signgroup/signup"}):a.uid&&t.defaultGroup?r.a.createElement(d.a,{to:"/"}):void 0}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this.props.authError;return r.a.createElement("div",{className:"container"},r.a.createElement("h2",{className:"sub-instruciton-title"},"Member Login"),r.a.createElement("div",{className:"formoutter"},r.a.createElement("div",{className:"formwrapper"},r.a.createElement("div",{className:"button-row"},r.a.createElement("button",{onClick:this.handleGoogleLogin,className:"google-button"},r.a.createElement("div",{className:"login-icon"},"G"),r.a.createElement("div",{className:"login-text"},"Continue with Google"))),r.a.createElement("div",{className:"feature-row"},r.a.createElement("div",{className:"hr-box "},r.a.createElement("div",{className:"hr-placer"},"\u2014\u2014\u2014"),r.a.createElement("div",{className:"hr"},"OR"),r.a.createElement("div",{className:"hr-placer"},"\u2014\u2014\u2014"))),r.a.createElement("form",{className:"signinform",onSubmit:this.handleSubmit},r.a.createElement("label",{className:"label-font",htmlFor:"email"},"Email"),r.a.createElement("div",{className:"input-row"},r.a.createElement("input",{type:"email",id:"email",onChange:this.handleChange})),r.a.createElement("label",{className:"label-font",htmlFor:"password"},"Password"),r.a.createElement("div",{className:"input-row"},r.a.createElement("input",{type:"password",id:"password",onChange:this.handleChange})),r.a.createElement("div",{className:"text-row error-holder"},e?r.a.createElement("p",{className:"alert-font"},e):null),r.a.createElement("div",{className:"feature-row"},r.a.createElement("button",{className:"medium-button"},"Log in"))))))}}]),a}(n.Component),w=Object(h.b)(function(e){return{authError:e.auth.authError,auth:e.firebase.auth,profile:e.firebase.profile}},function(e){return{signIn:function(a){return e((t=a,function(e,a,n){(0,n.getFirebase)().auth().signInWithEmailAndPassword(t.email,t.password).then(function(){e({type:"LOGIN_SUCCESS"})}).then(function(){window.location.hash="#/"}).catch(function(a){e({type:"LOGIN_ERROR",err:a})})}));var t},googleLogin:function(){return e(b())}}})(O),T=function(e){function a(){var e,t;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(i.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(r)))).state={email:"",password:"",firstName:"",lastName:""},t.handleChange=function(e){t.setState(Object(f.a)({},e.target.id,e.target.value))},t.handleSubmit=function(e){e.preventDefault(),t.props.signUp(t.state)},t.handleGoogleLogin=function(e){t.props.googleLogin()},t}return Object(m.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){var e=this.props,a=e.auth,t=e.authError;return a.uid?r.a.createElement(d.a,{to:"/"}):r.a.createElement("div",{className:"container"},r.a.createElement("h2",{className:"sub-instruciton-title"},"Start with Homie"),r.a.createElement("div",{className:"formoutter"},r.a.createElement("div",{className:"formwrapper"},r.a.createElement("div",{className:"button-row"},r.a.createElement("button",{onClick:this.handleGoogleLogin,className:"google-button"},r.a.createElement("div",{className:"login-icon"},"G"),r.a.createElement("div",{className:"login-text"},"Sign up with Google"))),r.a.createElement("div",{className:"feature-row"},r.a.createElement("div",{className:"hr-box "},r.a.createElement("div",{className:"hr-placer"},"\u2014\u2014\u2014"),r.a.createElement("div",{className:"hr"},"OR"),r.a.createElement("div",{className:"hr-placer"},"\u2014\u2014\u2014"))),r.a.createElement("form",{className:"signinform",onSubmit:this.handleSubmit},r.a.createElement("label",{className:"label-font",htmlFor:"email"},"Email"),r.a.createElement("div",{className:"input-row"},r.a.createElement("input",{type:"email",id:"email",onChange:this.handleChange})),r.a.createElement("label",{className:"label-font",htmlFor:"password"},"Password"),r.a.createElement("div",{className:"input-row"},r.a.createElement("input",{type:"password",id:"password",onChange:this.handleChange})),r.a.createElement("label",{className:"label-font",htmlFor:"firstName"},"First name"),r.a.createElement("div",{className:"input-row"},r.a.createElement("input",{type:"text",id:"firstName",onChange:this.handleChange})),r.a.createElement("label",{className:"label-font",htmlFor:"lastName"},"Last name"),r.a.createElement("div",{className:"input-row"},r.a.createElement("input",{type:"text",id:"lastName",onChange:this.handleChange})),r.a.createElement("div",{className:"text-row error-holder"},t?r.a.createElement("p",{className:"alert-font"},t):null),r.a.createElement("div",{className:"feature-row"},r.a.createElement("button",{className:"medium-button"},"Sign Up"))))))}}]),a}(n.Component),S=Object(h.b)(function(e){return{auth:e.firebase.auth,authError:e.auth.authError}},function(e){return{signUp:function(a){return e(function(e){return function(a,t,n){var r=n.getFirebase,s=n.getFirestore,c=r(),o=s(),l=E({luminosity:"bright"});c.auth().createUserWithEmailAndPassword(e.email,e.password).then(function(a){return o.collection("users").doc(a.user.uid).set({firstname:e.firstName,lastname:e.lastName,initials:e.firstName[0]+e.lastName[0],email:e.email,createAt:o.FieldValue.serverTimestamp(),photoURL:null,userColor:l})}).then(function(){c.auth().currentUser.updateProfile({displayName:e.firstName,email:e.email,createAt:o.FieldValue.serverTimestamp()})}).then(function(){a({type:"SIGNUP_SUCCESS"})}).then(function(){window.location.hash="#/signgroup/signup"}).catch(function(e){a({type:"SIGNUP_ERROR",err:e})})}}(a))},googleLogin:function(){return e(b())}}})(T),j=t(17),D=t(18),C=function(e){function a(){return Object(o.a)(this,a),Object(i.a)(this,Object(u.a)(a).apply(this,arguments))}return Object(m.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"empty-card"},r.a.createElement("div",{className:"bouncing-loader"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))))}}]),a}(n.Component),G=function(e){function a(){return Object(o.a)(this,a),Object(i.a)(this,Object(u.a)(a).apply(this,arguments))}return Object(m.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"empty-card"}))}}]),a}(n.Component),U=function(e){function a(){return Object(o.a)(this,a),Object(i.a)(this,Object(u.a)(a).apply(this,arguments))}return Object(m.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){var e=this.props,a=e.completeTasks,t=e.pendingTasks,n=e.assignedTasks,s=e.unassignedTasks;return r.a.createElement("div",{className:"tasklist-wapper"},r.a.createElement("div",{className:"title-row"},r.a.createElement("h3",{className:"row-title"},"UNASSIGNED"),r.a.createElement(p.b,{to:"/post",className:"row-icon icon-row-button"},r.a.createElement("h3",null,r.a.createElement(j.a,{icon:D.i})),r.a.createElement("p",{className:"row-feature-text"}))),this.props.fetchComplete?this.props.unassignedTasks[0]?r.a.createElement("div",{className:"container "},s&&s.map(function(e){return r.a.createElement(p.b,{className:"card-hover",to:"/task/"+e.id,key:e.id,task:e},r.a.createElement("div",{className:"task-card card-hover"},r.a.createElement("div",{className:"card-row "},r.a.createElement("div",{className:"col-pic"},r.a.createElement("div",{className:"card-img-box u-dashed-border"},r.a.createElement("div",{className:"card-img-box-inner"},r.a.createElement("div",{className:"card-img-holder"},r.a.createElement("p",null,r.a.createElement(j.a,{className:"unassigned-mark",icon:D.j})))))),r.a.createElement("div",{className:"col-info"},r.a.createElement("div",{className:"info-title-row"},r.a.createElement("h3",{className:"card-title"},e.data.title),r.a.createElement("div",{className:"create-tag"},r.a.createElement("p",{className:"card-create-time"},e.data.createAt.toDate().toDateString()),r.a.createElement("p",{className:"author-tag"},e.data.author," "))),0!==e.data.content.length?r.a.createElement("p",{className:"info-content"},e.data.content):r.a.createElement("p",{className:"info-content u-invisible"}," -- "),r.a.createElement("div",{className:"info-end-row"},e.data.verifybyImage?r.a.createElement("div",{className:"expiry-tag"},r.a.createElement("div",{className:"tag-icon"},r.a.createElement(j.a,{icon:D.b})),r.a.createElement("div",{className:"tag-date"},"proof needed")):null,r.a.createElement("div",{className:"expiry-tag"},r.a.createElement("div",{className:"tag-icon"},r.a.createElement(j.a,{icon:D.l})),r.a.createElement("div",{className:"tag-date"},e.data.expiryDate.toDate().toDateString())))))))})):r.a.createElement(G,null):r.a.createElement(C,null),r.a.createElement("div",{className:"title-row"},r.a.createElement("h3",{className:"row-title"},"ASSIGNED")),this.props.fetchComplete?this.props.assignedTasks[0]?r.a.createElement("div",{className:"container "},n&&n.map(function(e){return r.a.createElement(p.b,{to:"/task/memo/"+e.id,key:e.id,task:e},r.a.createElement("div",{className:"task-card card-hover"},r.a.createElement("div",{className:"card-row"},r.a.createElement("div",{className:"col-pic"},r.a.createElement("div",{className:"card-img-box "},r.a.createElement("div",{className:"card-img-box-inner"},null!==e.data.assign.assignedToURL?r.a.createElement("img",{className:"card-img-holder",src:e.data.assign.assignedToURL,alt:""}):r.a.createElement("div",{className:"card-img-holder",style:{backgroundColor:e.data.assign.assignedToColor}},r.a.createElement("p",null,e.data.assign.assignedTo[0]))))),r.a.createElement("div",{className:"col-info"},r.a.createElement("div",{className:"info-title-row"},r.a.createElement("h3",{className:"card-title"},e.data.title),r.a.createElement("div",{className:"create-tag"},r.a.createElement("p",{className:"card-create-time"},e.data.createAt.toDate().toDateString()),r.a.createElement("p",{className:"author-tag"},e.data.author," "))),0!==e.data.content.length?r.a.createElement("p",{className:"info-content"},e.data.content):r.a.createElement("p",{className:"info-content u-invisible"}," -- "),r.a.createElement("div",{className:"info-end-row"},e.data.verifybyImage?r.a.createElement("div",{className:"expiry-tag"},r.a.createElement("div",{className:"tag-icon"},r.a.createElement(j.a,{icon:D.b})),r.a.createElement("div",{className:"tag-date"},"proof needed")):null,r.a.createElement("div",{className:"expiry-tag"},r.a.createElement("div",{className:"tag-icon"},r.a.createElement(j.a,{icon:D.l})),r.a.createElement("div",{className:"tag-date"},e.data.expiryDate.toDate().toDateString())))))))})):r.a.createElement(G,null):r.a.createElement(C,null),r.a.createElement("div",{className:"title-row"},r.a.createElement("h3",{className:"row-title"},"PENDING APPROVAL")),this.props.fetchComplete?this.props.pendingTasks[0]?r.a.createElement("div",{className:"container "},t&&t.map(function(e){return r.a.createElement(p.b,{to:"/task/process/"+e.id,key:e.id,task:e},r.a.createElement("div",{className:"task-card card-hover"},r.a.createElement("div",{className:"card-row"},r.a.createElement("div",{className:"col-pic"},r.a.createElement("div",{className:"card-img-box "},r.a.createElement("div",{className:"card-img-box-inner"},null!==e.data.assign.assignedToURL?r.a.createElement("img",{className:"card-img-holder",src:e.data.assign.assignedToURL,alt:""}):r.a.createElement("div",{className:"card-img-holder",style:{backgroundColor:e.data.assign.assignedToColor}},r.a.createElement("p",null,e.data.assign.assignedTo[0]))))),r.a.createElement("div",{className:"col-info"},r.a.createElement("div",{className:"info-title-row"},r.a.createElement("h3",{className:"card-title"},e.data.title),r.a.createElement("div",{className:"create-tag"},r.a.createElement("p",{className:"card-create-time"},e.data.createAt.toDate().toDateString()),r.a.createElement("p",{className:"author-tag"},e.data.author," "))),0!==e.data.content.length?r.a.createElement("p",{className:"info-content"},e.data.content):r.a.createElement("p",{className:"info-content u-invisible"}," -- "),r.a.createElement("div",{className:"info-end-row"},e.data.verifybyImage?r.a.createElement("div",{className:"expiry-tag"},r.a.createElement("div",{className:"tag-icon"},r.a.createElement(j.a,{icon:D.b})),r.a.createElement("div",{className:"tag-date"},"proof needed")):null,r.a.createElement("div",{className:"expiry-tag"},r.a.createElement("div",{className:"tag-icon"},r.a.createElement(j.a,{icon:D.l})),r.a.createElement("div",{className:"tag-date"},e.data.expiryDate.toDate().toDateString())))))))})):r.a.createElement(G,null):r.a.createElement(C,null),r.a.createElement("div",{className:"title-row"},r.a.createElement("h3",{className:"row-title"},"COMPLETE")),this.props.fetchComplete?this.props.completeTasks[0]?r.a.createElement("div",{className:"container "},a&&a.map(function(e){return r.a.createElement("div",{className:"task-card ",key:e.id},r.a.createElement("div",{className:"card-row"},r.a.createElement("div",{className:"col-pic"},r.a.createElement("div",{className:"card-img-box "},r.a.createElement("div",{className:"card-img-box-inner"},null!==e.data.assign.assignedToURL?r.a.createElement("img",{className:"card-img-holder",src:e.data.assign.assignedToURL,alt:""}):r.a.createElement("div",{className:"card-img-holder",style:{backgroundColor:e.data.assign.assignedToColor}},r.a.createElement("p",null,e.data.assign.assignedTo[0]))))),r.a.createElement("div",{className:"col-info"},r.a.createElement("div",{className:"info-title-row"},r.a.createElement("h3",{className:"card-title"},e.data.title),r.a.createElement("div",{className:"create-tag"},r.a.createElement("p",{className:"card-create-time"},e.data.createAt.toDate().toDateString()),r.a.createElement("p",{className:"author-tag"},e.data.author," "))),0!==e.data.content.length?r.a.createElement("p",{className:"info-content"},e.data.content):r.a.createElement("p",{className:"info-content u-invisible"}," -- "),r.a.createElement("div",{className:"info-end-row"},e.data.verifybyImage?r.a.createElement("div",{className:"expiry-tag"},r.a.createElement("div",{className:"tag-icon"},r.a.createElement(j.a,{icon:D.b})),r.a.createElement("div",{className:"tag-date"},"proof needed")):null,r.a.createElement("div",{className:"expiry-tag"},r.a.createElement("div",{className:"tag-icon"},r.a.createElement(j.a,{icon:D.l})),r.a.createElement("div",{className:"tag-date"},e.data.expiryDate.toDate().toDateString()))))))})):r.a.createElement(G,null):r.a.createElement(C,null))}}]),a}(n.Component),R=t(116),A=function(e){function a(){return Object(o.a)(this,a),Object(i.a)(this,Object(u.a)(a).apply(this,arguments))}return Object(m.a)(a,e),Object(l.a)(a,[{key:"componentDidUpdate",value:function(){0!==this.props.data.length&&this.drawChart()}},{key:"drawChart",value:function(){var e=5,a=2,t=100-a-5,n=100-e-5,r=R.d("#chart").append("svg").attr("width","100%").attr("height","100%").append("g").attr("width",t+"%").attr("height",n+"%").style("transform","translate(".concat(a,"% ,").concat(e,"% )")).selectAll("rect").data(this.props.data),s=R.a(this.props.data,function(e){return e.points});s<5&&(s=5);var c=R.c().domain([0,s]).range([0,t]),o=R.b().domain(this.props.data.map(function(e){return e.firstname})).range([n,0]).padding(.5);r.enter().append("rect").attr("height",o.bandwidth()+"%").attr("width",function(e,a){return c(e.points)+"%"}).attr("y",function(e,a){return o(e.firstname)+"%"}).attr("x",function(e,a){return 0}).attr("fill",function(e,a){return e.userColor}).attr("radius",5),r.enter().append("text").style("font-size","0.8rem").style("font-weight","bold").attr("fill","#a5a5a5").attr("height",o.bandwidth()+"%").attr("width",function(e,a){return c(e.points)+"%"}).attr("y",function(e,a){return o(e.firstname)-2+"%"}).attr("x",0).text(function(e){return"".concat(e.firstname," : ").concat(e.points," points")}).style("backgroud-color","white")}},{key:"render",value:function(){return r.a.createElement("div",{className:"barchart-box"},r.a.createElement("div",{className:"barchart-inner"},r.a.createElement("div",{id:"chart"})))}}]),a}(n.Component),I=function(e){function a(){return Object(o.a)(this,a),Object(i.a)(this,Object(u.a)(a).apply(this,arguments))}return Object(m.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"welcome-wrapper"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"col-2-1"},r.a.createElement("div",{className:"logo-block"},r.a.createElement("div",{className:"logo-holder expand-effect"},r.a.createElement("h2",null,"\u25cf\xb4\u2200`\u25cf")))),r.a.createElement("div",{className:"col-2-1"},r.a.createElement("div",{className:"campaign-block"},r.a.createElement("h1",{className:"campaign-block-title "},"Start from ",r.a.createElement("span",{className:"brand"},"HOMIE"),r.a.createElement("br",null)," Arrange houseworks easier."),r.a.createElement("p",{className:""},"Manage, collaborate and track the houseworks smart.  ")))))}}]),a}(n.Component),x=t(65),P=function(e){return function(a,t,n){var r,s=(0,n.getFirestore)();e?s.collection("users").doc(e).get().then(function(e){return e.data().defaultGroup||null}).then(function(e){e?s.collection("groups").doc(e).get().then(function(e){r=e.data()}).then(function(){a({type:"GET_GROUP",groupData:r})}):a({type:"GET_GROUP_EMPTY"})}):a({type:"GET_GROUP_EMPTY"})}},F=function(e){function a(){var e,t;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(i.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(r)))).handleSwitch=function(e){t.props.switchGroup(e),t.props.togglePopup(),t.props.fetchGroupDetails()},t}return Object(m.a)(a,e),Object(l.a)(a,[{key:"componentDidUpdate",value:function(){}},{key:"componentWillMount",value:function(){}},{key:"render",value:function(){var e=this,a=this.props.groupsData;return r.a.createElement("div",{className:"popup"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"close-popup-row",onClick:this.props.togglePopup},r.a.createElement(j.a,{icon:D.g}))),r.a.createElement("div",{className:"option-block"},a&&a.map(function(a){var t=a.groupUid,n=a.groupName;return r.a.createElement("div",{onClick:function(){return e.handleSwitch(t)},className:"option-row ",key:t},r.a.createElement("div",{className:"option-icon"},r.a.createElement(j.a,{icon:D.d})),r.a.createElement("div",{className:"option-text"},n))})),r.a.createElement("div",{className:"u-bottom"},r.a.createElement("div",{className:"container"},r.a.createElement(p.c,{to:"/signgroup/signin"},r.a.createElement("div",{className:"option-row "},r.a.createElement("div",{className:"option-icon"},r.a.createElement(j.a,{icon:D.h})),r.a.createElement("div",{className:"option-text"},"Join new group")))))))}}]),a}(n.Component),_=Object(h.b)(function(e){return{groupsUid:e.firebase.profile.groupsUid,defaultGroup:e.firebase.profile.defaultGroup}},function(e){return{switchGroup:function(a){return e(function(e){return function(a,t,n){var r=n.getFirestore,s=t().firebase.auth.uid;r().collection("users").doc(s).update({defaultGroup:e}).then(a({type:"SWITCHGROUP_SUCCESS"})).catch(function(e){a({type:"SWITCHGROUP_ERROR",error:e})})}}(a))},fetchGroupDetails:function(a){return e(P(a))}}})(F),L=t(164),B=t.n(L);t(444),t(448),t(773);B.a.initializeApp({apiKey:"AIzaSyAPYaJoMlKsJ6iepxr8uWw4ZE1aPlH6rvI",authDomain:"homie-2019.firebaseapp.com",databaseURL:"https://homie-2019.firebaseio.com",projectId:"homie-2019",storageBucket:"homie-2019.appspot.com"});var M=B.a.storage(),K=function(e){return function(a,t,n){n.getFirebase;var r,s=(0,n.getFirestore)();e?s.collection("tasks").doc(e).get().then(function(e){r={id:e.id,data:e.data()}}).then(function(){a({type:"GET_TASK",taskData:r})}).catch(function(e){console.log(e),a({type:"EMPTY_TASK"})}):a({type:"EMPTY_TASK"})}},V=function(e){function a(){var e,t;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(i.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(r)))).handleConfirm=function(){t.props.leaveGroup()},t}return Object(m.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"popup-layer"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"information-window"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"alert-icon browncolor-icon"},r.a.createElement(j.a,{icon:D.k})),r.a.createElement("h2",null,"Warning"),r.a.createElement("h4",null,"Are you sure to leave this group? All your records in this group will be deleted."),r.a.createElement("hr",null)),r.a.createElement("div",{className:"feature-row"},r.a.createElement("button",{className:"small-square-button cancel-button",onClick:this.props.toggleLeaveGroup},"Dismiss"),r.a.createElement("button",{className:"small-square-button",onClick:this.handleConfirm},"Confirm")))))}}]),a}(n.Component),W=Object(h.b)(null,function(e){return{confirmTaskAlert:function(){return e(function(e,a,t){t.getFirebase,t.getFirestore,e({type:"RESET_TASK_ALERT"})})},leaveGroup:function(){return e(function(e,a,t){t.getFirebase;var n,r=(0,t.getFirestore)(),s=a().firebase.auth.uid,c=a().firebase.profile,o=c.defaultGroup,l=c.groupsUid,i=null,u=l.filter(function(e){return e!==o});o&&r.collection("groups").doc(o).update((n={members:r.FieldValue.arrayRemove(s)},Object(f.a)(n,"membersInfo.".concat(s),r.FieldValue.delete()),Object(f.a)(n,"pointsRecord.".concat(s),r.FieldValue.delete()),n)).then(function(){0===u.length?(i=null,r.collection("users").doc(s).update({groupsUid:u,defaultGroup:i}).then(function(){window.location.hash="#/signgroup/signin"}).catch(function(e){return console.log(e)})):r.collection("users").doc(s).update({groupsUid:u,defaultGroup:u[0]}).then(function(){window.location.hash="#/"}).catch(function(e){return console.log(e)})}).catch(function(e){return console.log(e)})})}}})(V),Y=function(e){function a(){var e,t;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(i.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(r)))).state={groupPopup:!1,leavePopup:!1,memberBar:!1,settingBar:!1},t.togglePopup=function(){t.state.groupPopup||t.props.profile.defaultGroup&&(t.props.fetchGroupList(t.props.groupsUid),t.props.fetchTaskList(),t.props.fetchGroupDetails()),t.state.groupPopup&&t.props.profile.defaultGroup&&(t.props.fetchTaskList(t.props.auth.uid),t.props.fetchGroupDetails(t.props.auth.uid)),t.setState(function(e){return{groupPopup:!e.groupPopup}})},t.toggleSettingBar=function(){t.setState(function(e){return{settingBar:!e.settingBar}}),t.state.memberBar&&t.setState(function(e){return{memberBar:!e.memberBar}})},t.toggleMemberbar=function(){t.setState(function(e){return{memberBar:!e.memberBar}}),t.state.settingBar&&t.setState(function(e){return{settingBar:!e.settingBar}})},t.toggleLeaveGruop=function(e){t.setState(function(e){return{leavePopup:!e.leavePopup}})},t}return Object(m.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){this.props.auth.uid&&(this.props.fetchTaskList(this.props.auth.uid),this.props.fetchGroupDetails(this.props.auth.uid))}},{key:"componentWillUnmount",value:function(){this.props.fetchGroupDetails(),this.props.fetchTaskList()}},{key:"render",value:function(){var e=this.props,a=e.membersInfo,t=e.completeTasksData,n=e.pendingTasksData,s=e.assignedTasksData,c=e.unassignedTasksData,o=e.tasksData,l=e.auth,i=[],u=this.props.membersPointsRecord;return this.props.membersPointsRecord&&Object.keys(u).forEach(function(e){i.push(u[e])}),l.uid?r.a.createElement("div",{className:"dashboard-wrapper"},this.state.groupPopup?r.a.createElement(_,{togglePopup:this.togglePopup.bind(this),groupsData:this.props.groupsData}):null,this.state.leavePopup?r.a.createElement(W,{toggleLeaveGroup:this.toggleLeaveGruop.bind(this)}):null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"selected-wrapper"},r.a.createElement("div",{className:"selected-group",onClick:this.togglePopup},this.props.defaultGroupData?this.props.defaultGroupData.groupName:null," ",r.a.createElement(j.a,{icon:D.a}))),r.a.createElement("div",{className:"indicator-wrapper"},r.a.createElement("div",{className:"icon-bar"},r.a.createElement("div",{onClick:this.toggleSettingBar,className:"indicator-button "},r.a.createElement(j.a,{icon:D.c})),r.a.createElement("div",{onClick:this.toggleMemberbar,className:"indicator-button "},r.a.createElement(j.a,{icon:D.n})," ",this.props.defaultGroupData?this.props.defaultGroupData.members.length:1)),this.state.memberBar?r.a.createElement("div",{className:"member-bar"},a?Object.keys(a).map(function(e){return r.a.createElement("div",{className:"member-button",key:e},r.a.createElement("div",{className:"member-cirle"},r.a.createElement("div",{className:"circle-wrapper"},"null"===a[e].photoURL?r.a.createElement("div",{className:"member-img-holder"}," ",r.a.createElement(j.a,{icon:D.o})," "):r.a.createElement("img",{src:a[e].photoURL,alt:""}))),r.a.createElement("span",{className:"circle-name"},a[e].firstname))}):null):null,this.state.settingBar?r.a.createElement("div",{className:"setting-bar"},r.a.createElement(p.b,{to:"/signgroup/signin"},r.a.createElement("div",{className:"setting-button"},r.a.createElement(j.a,{icon:D.e}),"  Join new group")),r.a.createElement("div",{onClick:this.toggleLeaveGruop,className:"setting-button"},r.a.createElement(j.a,{icon:D.m})," Leave this group")):null)),r.a.createElement("div",{className:"container"},this.state.groupPopup||this.state.leavePopup?null:r.a.createElement(A,{data:this.props.pointsData,width:this.state.width,height:this.state.height})),r.a.createElement("div",{className:"container"},this.state.groupPopup||this.state.leavePopup?null:r.a.createElement(U,{fetchComplete:this.props.fetchComplete,task:o,unassignedTasks:c,assignedTasks:s,pendingTasks:n,completeTasks:t}))):r.a.createElement("div",{className:"landing-wrapper"},r.a.createElement(I,null))}}]),a}(n.Component),q=Object(h.b)(function(e){var a=[],t=e.group.defaultGroupData?e.group.defaultGroupData.pointsRecord:null;t&&Object.keys(t).forEach(function(e){a.push(t[e])});var n=e.group.defaultGroupData?e.group.defaultGroupData:null,r=e.firebase.auth?e.firebase.auth:null,s=e.group.defaultGroupData?e.group.defaultGroupData.membersInfo:null,c=e.group.defaultGroupData?e.group.defaultGroupData.pointsRecord:null;return{tasks:e.firestore.ordered.tasks,auth:r,groupsUid:e.firebase.profile.groupsUid,groupsData:e.group.groups,profile:e.firebase.profile,defaultGroupData:n,membersInfo:s,membersPointsRecord:c,tasksData:e.task.tasksData,unassignedTasksData:e.task.unassignedTasksData,assignedTasksData:e.task.assignedTasksData,pendingTasksData:e.task.pendingTasksData,completeTasksData:e.task.completeTasksData,pointsData:a,fetchComplete:e.task.complete}},function(e){return{fetchGroupList:function(a){return e(function(e){return function(a,t,n){n.getFirebase;var r=n.getFirestore,s=[],c=r();e.map(function(e){return c.collection("groups").doc(e).get().then(function(e){s=[].concat(Object(x.a)(s),[e.data()])}).then(function(){a({type:"GROUP_ADD",groupsData:s})})})}}(a))},fetchTaskList:function(a){return e(function(e){return function(a,t,n){n.getFirebase;var r=(0,n.getFirestore)(),s=[],c=[],o=[],l=[],i=[];e?r.collection("users").doc(e).get().then(function(e){return e.data().defaultGroup||null}).then(function(e){e&&r.collection("tasks").where("groupUid","==",e).orderBy("lastUpdateAt","desc").get().then(function(e){e.forEach(function(e){s=[].concat(Object(x.a)(s),[{id:e.id,data:e.data()}])})}).then(function(){r.collection("tasks").where("groupUid","==",e).where("status","==","unassigned").orderBy("lastUpdateAt","desc").get().then(function(e){e.forEach(function(e){c=[].concat(Object(x.a)(c),[{id:e.id,data:e.data()}])})}).then(function(){r.collection("tasks").where("groupUid","==",e).where("status","==","assigned").orderBy("lastUpdateAt","desc").get().then(function(e){e.forEach(function(e){o=[].concat(Object(x.a)(o),[{id:e.id,data:e.data()}])})}).then(function(){r.collection("tasks").where("groupUid","==",e).where("status","==","pending").orderBy("lastUpdateAt","desc").get().then(function(e){e.forEach(function(e){l=[].concat(Object(x.a)(l),[{id:e.id,data:e.data()}])})}).then(function(){r.collection("tasks").where("groupUid","==",e).where("status","==","complete").orderBy("lastUpdateAt","desc").get().then(function(e){e.forEach(function(e){i=[].concat(Object(x.a)(i),[{id:e.id,data:e.data()}])})}).then(function(){a({type:"GET_TASKS",tasksData:s,unassignedTasksData:c,assignedTasksData:o,pendingTasksData:l,completeTasksData:i})})})})})})}).catch(function(e){console.log(e),a({type:"EMPTY_TASKS"})}):a({type:"EMPTY_TASKS"})}}(a))},fetchGroupDetails:function(a){return e(P(a))}}})(Y),J=t(368),H=t(234),X=function(e){function a(){var e,t;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(i.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(r)))).state={title:"",content:"",category:"trash",expiryDate:new Date((new Date).getTime()+6048e5),verifybyImage:!1},t.handleBack=function(e){e.preventDefault(),window.location.href="#/"},t.handleChange=function(e){t.setState(Object(f.a)({},e.target.id,e.target.value))},t.toggleChange=function(){t.setState({verifybyImage:!t.state.verifybyImage})},t.handleDateChange=function(e){t.setState({expiryDate:e})},t.handleSubmit=function(e){e.preventDefault(),t.props.createTask(t.state)},t.handleAlert=function(e){t.props.confirmTaskAlert()},t}return Object(m.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){var e=this.state.expiryDate;return r.a.createElement("div",{"data-test":"component-create-task",className:"component-create-task"},this.props.taskErr?r.a.createElement("div",{className:"popup-layer"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"information-window"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"alert-icon"},r.a.createElement(j.a,{icon:D.f})),r.a.createElement("h2",null,"Error"),r.a.createElement("h4",null,"The field of title cannot be empty"),r.a.createElement("hr",null),r.a.createElement("button",{className:"medium-button",onClick:this.handleAlert},"OK"))))):null,r.a.createElement("div",{className:"container"},r.a.createElement("h2",{className:"sub-instruciton-title"},"Post a task"),r.a.createElement("form",{className:"signinform",onSubmit:this.handleSubmit},r.a.createElement("label",{className:"label-font",htmlFor:"title"},"Title"),r.a.createElement("div",{className:"task-input-row"},r.a.createElement("input",{type:"test",id:"title",onChange:this.handleChange})),r.a.createElement("label",{className:"label-font",htmlFor:"expiryDate"},"Expiry Date"),r.a.createElement("div",{className:"task-input-row"},r.a.createElement(H.b,{id:"expiryDate",utils:J.a},r.a.createElement("div",{className:"pickers"},r.a.createElement(H.a,{id:"inputdate",className:"input-date browser-default",value:e,onChange:this.handleDateChange})))),r.a.createElement("label",{className:"label-font",htmlFor:"expiryDate"},"Category"),r.a.createElement("div",{className:"task-input-row"},r.a.createElement("select",{value:this.state.value,name:"",id:"category",onChange:this.handleChange},r.a.createElement("option",{value:"trash"},"Trash"),r.a.createElement("option",{value:"clean"},"Clean"),r.a.createElement("option",{value:"bathroom"},"Bathroom"),r.a.createElement("option",{value:"kitchen"},"Kitchen"),r.a.createElement("option",{value:"floor"},"Floor"),r.a.createElement("option",{value:"other"},"Other"))),r.a.createElement("label",{className:"label-font",htmlFor:"verifybyImage"},"Verification condition"),r.a.createElement("div",{className:"checkbox-wrapper"},r.a.createElement("div",{className:"task-checkboxinput-row"},r.a.createElement("input",{"data-test":"createtask-checkbox",type:"checkbox",id:"verifybyImage",checked:this.state.verifybyImage,onChange:this.toggleChange}),r.a.createElement("span",{"data-test":"createtask-display-checked",className:"checkmark"})),r.a.createElement("div",{className:"checkbox-text"},"Photo proof")),r.a.createElement("label",{className:"label-font",htmlFor:"content"},"Description"),r.a.createElement("div",{className:"textarea-row"},r.a.createElement("textarea",{type:"text",id:"content",onChange:this.handleChange})),r.a.createElement("div",{className:"feature-row"},r.a.createElement("button",{"data-test":"createtask-button",onClick:this.handleBack,className:"medium-square-button cancel-button"},"Back"),r.a.createElement("button",{className:"medium-square-button"},"Save")))))}}]),a}(n.Component),z=Object(h.b)(function(e){return{taskErr:e.task.err}},function(e){return{createTask:function(a){return e(function(e){return function(a,t,n){n.getFirebase;var r=(0,n.getFirestore)(),s=t().firebase.profile,c=t().firebase.auth.uid;0!==e.title.length?r.collection("tasks").add(Object(g.a)({},e,{author:s.firstname,authorUid:c,authorPhotoURL:s.photoURL||null,authorColor:s.userColor||null,groupUid:s.defaultGroup,createAt:new Date,assign:{assignedTo:null,assignedAt:null},approve:{verifiedBy:null,verifiedAt:null},lastUpdateAt:r.FieldValue.serverTimestamp(),status:"unassigned"})).then(function(){a({type:"CREATE_TASK",task:e})}).then(function(){window.location.hash="#/"}).catch(function(e){a({type:"CREATE_TASK_ERROR",err:e})}):a({type:"TASK_BLANK"})}}(a))},confirmTaskAlert:function(){return e(function(e,a,t){t.getFirebase,t.getFirestore,e({type:"RESET_TASK_ALERT"})})}}})(X),Z=function(e){function a(){return Object(o.a)(this,a),Object(i.a)(this,Object(u.a)(a).apply(this,arguments))}return Object(m.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"bouncing-loader"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)))}}]),a}(n.Component),Q=function(e){function a(){var e,t;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(i.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(r)))).handleBack=function(e){e.preventDefault(),window.location.href="#/"},t.handleAccept=function(e){t.props.acceptTask(t.props.match.params.id)},t}return Object(m.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchTask(this.props.match.params.id)}},{key:"componentWillUnmount",value:function(){this.props.fetchTask()}},{key:"render",value:function(){var e=this.props.match.params.id;if(this.props.taskdetails.data){var a=this.props.taskdetails.data,t=a.createAt,n=a.assign,s=a.expiryDate,c=a.author,o=a.content,l=a.title;return console.log(n),r.a.createElement("div",{className:"taskdetails-wrapper",key:e},r.a.createElement("div",{className:"container "},r.a.createElement("h2",{className:"sub-instruciton-title"},"Accept the Task"),r.a.createElement("div",{className:"task-card"},r.a.createElement("div",{className:"expiry-row"},r.a.createElement("div",{className:"expiry-col"},r.a.createElement("div",{className:"expiry-assign-pic"},r.a.createElement("div",{className:"expiry-picbox"},r.a.createElement("div",{className:"expiry-picbox-inner"},r.a.createElement("div",{className:"card-img-holder"}," ",r.a.createElement("p",null,r.a.createElement(j.a,{className:"unassigned-mark",icon:D.j})))))),r.a.createElement("div",{className:"expiry-assign-name"},r.a.createElement("div",{className:"assign-text"},r.a.createElement("span",null,"Assigned to")," "),r.a.createElement("div",{className:"assign-content"},null===n.assignedTo?"???":null))),r.a.createElement("div",{className:"expiry-date-col"},r.a.createElement("div",{className:"date-tag-time"},s.toDate().toTimeString().replace("GMT+0800 (Taipei Standard Time)","").slice(0,5)),r.a.createElement("div",{className:"date-tag-date"},r.a.createElement("span",{className:"date-tag-span"},s.toDate().toDateString())))),r.a.createElement("div",{className:"content-block"},r.a.createElement("h2",{className:"title"},l),r.a.createElement("p",{className:"main-content"},o)),r.a.createElement("div",{className:"hr-row"},r.a.createElement("hr",null)),r.a.createElement("div",{className:"create-row"},r.a.createElement("span",null,t.toDate().toTimeString().replace("GMT+0800 (Taipei Standard Time)","").slice(0,5)),"\u30fb",r.a.createElement("span",null,t.toDate().toDateString().slice(4,15).replace(/\s+/g,"/")),"\u30fb",r.a.createElement("span",null,c)))),r.a.createElement("div",{className:"feature-row"},r.a.createElement("button",{onClick:this.handleBack,className:"medium-square-button cancel-button"},"Back"),r.a.createElement("button",{onClick:this.handleAccept,className:"medium-square-button"},"Accept")))}return r.a.createElement(Z,null)}}]),a}(n.Component),$=Object(h.b)(function(e,a){return{taskdetails:e.task.taskData?e.task.taskData:null}},function(e){return{fetchTask:function(a){return e(K(a))},acceptTask:function(a){return e(function(e){return function(a,t,n){n.getFirebase;var r=(0,n.getFirestore)(),s=t().firebase.auth.uid,c=t().firebase.profile,o=t().firebase.profile.firstname,l=t().firebase.profile.defaultGroup;r.collection("tasks").doc(e).update({assign:{assignedAt:r.FieldValue.serverTimestamp(),assignedTo:o,assignedToUid:s,assignedToURL:c.photoURL||null,assignedToColor:c.userColor||null},lastUpdateAt:r.FieldValue.serverTimestamp(),status:"assigned"}).then(function(){r.collection("users").doc(s).update(Object(f.a)({},"beAssignedTo.".concat(l),r.FieldValue.arrayUnion(e))).then(function(){a({type:"EMPTY_TASKS"})}).then(function(){window.location.hash="#/"})}).catch(function(e){console.log(e)})}}(a))}}})(Q),ee=function(e){function a(){var e,t;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(i.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(r)))).handleAlert=function(e){t.props.confirmTaskAlert()},t}return Object(m.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"popup-layer"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"information-window"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"alert-icon"},r.a.createElement(j.a,{icon:D.f})),r.a.createElement("h2",null,"Error"),r.a.createElement("h4",null,this.props.errorMessage),r.a.createElement("hr",null),r.a.createElement("button",{className:"medium-button",onClick:this.handleAlert},"OK")))))}}]),a}(n.Component),ae=Object(h.b)(function(e){return{errorMessage:e.task.errMessage}},function(e){return{confirmTaskAlert:function(){return e(function(e,a,t){t.getFirebase,t.getFirestore,e({type:"RESET_TASK_ALERT"})})}}})(ee),te=(t(595),function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(i.a)(this,Object(u.a)(a).call(this,e))).state={files:[],imagePreviewUrl:[],imagefile:null},t.handleBack=function(e){e.preventDefault(),window.location.href="#/"},t.handleChange=function(e){t.setState({files:e.target.files,imagePreviewUrl:URL.createObjectURL(e.target.files[0]),file:e.target.files[0]})},t.handleReportWithImage=function(e){e.preventDefault();var a=t.props.match.params.id,n=t.props.taskdetails.data.assign;t.props.reportTaskWithImage(a,n,t.state.file)},t.handleReport=function(e){e.preventDefault();var a=t.props.match.params.id,n=t.props.taskdetails.data.assign;t.props.reportTaskWOImage(a,n)},t.fileInput=r.a.createRef(),t}return Object(m.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchTask(this.props.match.params.id)}},{key:"componentWillUnmount",value:function(){this.props.fetchTask()}},{key:"render",value:function(){var e=this.props.match.params.id;if(this.props.taskdetails.data){var a=this.props.taskdetails.data,t=a.createAt,n=a.verifybyImage,s=a.expiryDate,c=a.assign,o=a.author,l=a.content,i=a.title;return r.a.createElement("div",null,this.props.taskErr?r.a.createElement(ae,{error:this.props.match.params.id}):null,r.a.createElement("div",{className:"taskdetails-wrapper",key:e},r.a.createElement("div",{className:"container "},r.a.createElement("h2",{className:"sub-instruciton-title"},"Report the Task"),r.a.createElement("div",{className:"task-card"},r.a.createElement("div",{className:"expiry-row"},r.a.createElement("div",{className:"expiry-col"},r.a.createElement("div",{className:"expiry-assign-pic"},r.a.createElement("div",{className:"expiry-picbox"},r.a.createElement("div",{className:"expiry-picbox-inner"},null!==c.assignedToURL?r.a.createElement("img",{className:"expiry-img",src:c.assignedToURL,alt:""}):r.a.createElement("div",{className:"card-img-holder",style:{backgroundColor:c.assignedToColor}},r.a.createElement("p",null,c.assignedTo[0]))))),r.a.createElement("div",{className:"expiry-assign-name"},r.a.createElement("div",{className:"assign-text"},r.a.createElement("span",null,"Assigned to")," "),r.a.createElement("div",{className:"assign-content"},c.assignedTo))),r.a.createElement("div",{className:"expiry-date-col"},r.a.createElement("div",{className:"date-tag-time"},s.toDate().toTimeString().replace("GMT+0800 (Taipei Standard Time)","").slice(0,5)),r.a.createElement("div",{className:"date-tag-date"},r.a.createElement("span",{className:"date-tag-span"},s.toDate().toDateString())))),r.a.createElement("div",{className:"content-block"},r.a.createElement("h2",{className:"title"},i),r.a.createElement("p",{className:"main-content"},l)),r.a.createElement("div",{className:"hr-row"},r.a.createElement("hr",null)),r.a.createElement("div",{className:"create-row"},r.a.createElement("span",null,t.toDate().toTimeString().replace("GMT+0800 (Taipei Standard Time)","").slice(0,5)),"\u30fb",r.a.createElement("span",null,t.toDate().toDateString().slice(4,15).replace(/\s+/g,"/")),"\u30fb",r.a.createElement("span",null,o)),this.state.imagePreviewUrl[0]&&r.a.createElement("div",null,r.a.createElement("div",{className:"image-row"},r.a.createElement("div",{className:"image-box"},r.a.createElement("div",{className:"image-box-inner"},r.a.createElement("img",{className:"",src:this.state.imagePreviewUrl,alt:""})))))),n?r.a.createElement("div",{className:"uploadwrapper"},r.a.createElement("form",{action:"",onSubmit:this.handleReportWithImage},r.a.createElement("div",{className:"task-file-input-row"},r.a.createElement("label",{htmlFor:"imagefile"},"attachment"),r.a.createElement("input",{id:"imagefile",type:"file",onChange:this.handleChange,ref:this.fileInput})),r.a.createElement("div",{className:"feature-row"},r.a.createElement("button",{onClick:this.handleBack,className:"medium-square-button cancel-button"},"Back"),r.a.createElement("button",{className:"medium-square-button"},"Finish")))):r.a.createElement("div",{className:"uploadwrapper"},r.a.createElement("form",{action:"",onSubmit:this.handleReport},r.a.createElement("div",{className:"feature-row"},r.a.createElement("button",{onClick:this.handleBack,className:"medium-square-button cancel-button"},"Back"),r.a.createElement("button",{className:"medium-square-button"},"Finish")))))))}return r.a.createElement(Z,null)}}]),a}(n.Component)),ne=Object(h.b)(function(e,a){return{taskdetails:e.task.taskData?e.task.taskData:null,taskErr:e.task.err}},function(e){return{fetchTask:function(a){return e(K(a))},reportTaskWithImage:function(a,t,n){return e(function(e,a,t){return function(n,r,s){s.getFirebase;var c=(0,s.getFirestore)(),o=r().firebase.profile.defaultGroup,l=r().firebase.auth.uid,i=a.assignedToUid;if(l===i)if(t){var u=M.ref("task_images/".concat(e)).child(t.name);u.put(t).then(function(a){u.getDownloadURL().then(function(a){c.collection("tasks").doc(e).update({lastUpdateAt:c.FieldValue.serverTimestamp(),finishAt:c.FieldValue.serverTimestamp(),status:"pending",pendingImgURL:a}).then(function(){var a;c.collection("users").doc(l).update((a={},Object(f.a)(a,"beAssignedTo.".concat(o),c.FieldValue.arrayRemove(e)),Object(f.a)(a,"pending.".concat(o),c.FieldValue.arrayUnion(e)),a)).then(function(){n({type:"EMPTY_TASKS"})}).then(function(){window.location.hash="#/"}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e),alert("upload failed, please try again")})}).catch(function(e){console.log(e),alert("upload failed, please try again")})}else console.log("\u6c92\u6709\u4e0a\u50b3\u5716\u7247"),n({type:"TASK_BLANK_NOPIC"});else n({type:"TASK_NOT_ASSIGNED"})}}(a,t,n))},reportTaskWOImage:function(a,t){return e(function(e,a){return function(t,n,r){r.getFirebase;var s=(0,r.getFirestore)(),c=n().firebase.profile.defaultGroup,o=n().firebase.auth.uid,l=a.assignedToUid;o===l?s.collection("tasks").doc(e).update({lastUpdateAt:s.FieldValue.serverTimestamp(),finishAt:s.FieldValue.serverTimestamp(),status:"pending"}).then(function(){var a;s.collection("users").doc(o).update((a={},Object(f.a)(a,"beAssignedTo.".concat(c),s.FieldValue.arrayRemove(e)),Object(f.a)(a,"pending.".concat(c),s.FieldValue.arrayUnion(e)),a)).then(function(){t({type:"EMPTY_TASKS"})}).then(function(){window.location.hash="#/"}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)}):t({type:"TASK_NOT_ASSIGNED"})}}(a,t))}}})(te),re=function(e){function a(){var e,t;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(i.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(r)))).handleBack=function(e){e.preventDefault(),window.location.href="#/"},t.handleApprove=function(e){var a=t.props.taskdetails.data.assign;t.props.approveTask(t.props.match.params.id,a)},t}return Object(m.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchTask(this.props.match.params.id)}},{key:"componentWillUnmount",value:function(){this.props.fetchTask()}},{key:"render",value:function(){var e=this.props.match.params.id;if(this.props.taskdetails.data){var a=this.props.taskdetails.data,t=a.createAt,n=a.content,s=a.expiryDate,c=a.pendingImgURL,o=a.assign,l=a.author,i=a.title;return r.a.createElement("div",{className:"taskdetails-wrapper",key:e},r.a.createElement("div",{className:"container "},r.a.createElement("h2",{className:"sub-instruciton-title"},"Approve the Task"),r.a.createElement("div",{className:"task-card"},r.a.createElement("div",{className:"expiry-row"},r.a.createElement("div",{className:"expiry-col"},r.a.createElement("div",{className:"expiry-assign-pic"},r.a.createElement("div",{className:"expiry-picbox"},r.a.createElement("div",{className:"expiry-picbox-inner"},null!==o.assignedToURL?r.a.createElement("img",{className:"expiry-img",src:o.assignedToURL,alt:""}):r.a.createElement("div",{className:"card-img-holder",style:{backgroundColor:o.assignedToColor}},r.a.createElement("p",null,o.assignedTo[0]))))),r.a.createElement("div",{className:"expiry-assign-name"},r.a.createElement("div",{className:"assign-text"},r.a.createElement("span",null,"Assigned to")," "),r.a.createElement("div",{className:"assign-content"},o.assignedTo))),r.a.createElement("div",{className:"expiry-date-col"},r.a.createElement("div",{className:"date-tag-time"},s.toDate().toTimeString().replace("GMT+0800 (Taipei Standard Time)","").slice(0,5)),r.a.createElement("div",{className:"date-tag-date"},r.a.createElement("span",{className:"date-tag-span"},s.toDate().toDateString())))),r.a.createElement("div",{className:"content-block"},r.a.createElement("h2",{className:"title"},i),r.a.createElement("p",{className:"main-content"},n)),r.a.createElement("div",{className:"hr-row"},r.a.createElement("hr",null)),r.a.createElement("div",{className:"create-row"},r.a.createElement("span",null,t.toDate().toTimeString().replace("GMT+0800 (Taipei Standard Time)","").slice(0,5)),"\u30fb",r.a.createElement("span",null,t.toDate().toDateString().slice(4,15).replace(/\s+/g,"/")),"\u30fb",r.a.createElement("span",null,l)),c?r.a.createElement("div",null,r.a.createElement("p",{className:"expirydate"},"Image attachment"),r.a.createElement("div",{className:"image-row"},r.a.createElement("div",{className:"image-box"},r.a.createElement("div",{className:"image-box-inner"},r.a.createElement("img",{className:"",src:c,alt:""}))))):null)),r.a.createElement("div",{className:"feature-row"},r.a.createElement("button",{onClick:this.handleBack,className:"medium-square-button cancel-button"},"Back"),r.a.createElement("button",{onClick:this.handleApprove,className:"medium-square-button"},"Approve")))}return r.a.createElement(Z,null)}}]),a}(n.Component),se=Object(h.b)(function(e,a){return{taskdetails:e.task.taskData?e.task.taskData:null}},function(e){return{fetchTask:function(a){return e(K(a))},approveTask:function(a,t){return e(function(e,a){return function(t,n,r){r.getFirebase;var s,c=(0,r.getFirestore)(),o=n().firebase.profile.defaultGroup,l=n().firebase.profile.firstname,i=n().firebase.profile,u=n().firebase.auth.uid,m=a.assignedToUid;u!==m?c.collection("groups").doc(o).get().then(function(e){var a=e.data().pointsRecord;return s=a[m].points+1}).then(function(){c.collection("groups").doc(o).update(Object(f.a)({},"pointsRecord.".concat(m,".points"),s)).then(function(){c.collection("tasks").doc(e).update({lastUpdateAt:c.FieldValue.serverTimestamp(),status:"complete",approve:{approvedAt:c.FieldValue.serverTimestamp(),approvedBy:l,approvedByURL:i.photoURL||null,approvedByColor:i.userColor||null}}).then(function(){var a;c.collection("users").doc(m).update((a={},Object(f.a)(a,"pending.".concat(o),c.FieldValue.arrayRemove(e)),Object(f.a)(a,"finish.".concat(o),c.FieldValue.arrayUnion(e)),a)).then(function(){t({type:"EMPTY_TASKS"})}).then(function(){window.location.hash="#/"}).catch(function(e){return console.log(e)})}).catch(function(e){return console.log(e)})}).catch(function(e){return console.log(e)})}).catch(function(e){return console.log(e)}):alert("It is an invalid action")}}(a,t))}}})(re),ce=function(e){function a(){var e,t;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(i.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(r)))).state={groupName:"",groupId:"",groupPassword:""},t.handleChange=function(e){t.setState(Object(f.a)({},e.target.id,e.target.value))},t.handleSubmit=function(e){e.preventDefault(),t.props.signUpGroup(t.state)},t}return Object(m.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"formoutter"},r.a.createElement("div",{className:"formwrapper-bottom"},r.a.createElement("form",{className:"signinform",onSubmit:this.handleSubmit},r.a.createElement("label",{className:"label-font",htmlFor:"groupName"},"Group Name"),r.a.createElement("div",{className:"input-row"},r.a.createElement("input",{type:"text",id:"groupName",onChange:this.handleChange})),r.a.createElement("label",{className:"label-font",htmlFor:"groupId"},"Group ID"),r.a.createElement("div",{className:"input-row"},r.a.createElement("input",{type:"text",id:"groupId",onChange:this.handleChange})),r.a.createElement("label",{className:"label-font",htmlFor:"groupPassword"},"Group Password"),r.a.createElement("div",{className:"input-row"},r.a.createElement("input",{type:"password",id:"groupPassword",onChange:this.handleChange})),r.a.createElement("div",{className:"text-row error-holder"},this.props.groupError?r.a.createElement("p",{className:"alert-font"},this.props.groupError):null),r.a.createElement("div",{className:"feature-row"},r.a.createElement("button",{className:"medium-button"},"Create Group")))))}}]),a}(n.Component),oe=Object(h.b)(function(e){return{auth:e.firebase.auth,groupError:e.auth.groupError}},function(e){return{signUpGroup:function(a){return e(function(e){return function(a,t,n){n.getFirebase;var r=(0,n.getFirestore)(),s=t().firebase.auth.uid,c=t().firebase.profile,o=!0,l=e.groupName,i=e.groupId,u=e.groupPassword;0!==l.length&&0!==i.length&&0!==u.length?r.collection("groups").where("groupId","==",e.groupId).get().then(function(e){e.forEach(function(e){e.data()&&(o=!1)})}).then(function(){o||a({type:"SIGNUPGROUP_ERROR"}),o&&r.collection("groups").add(Object(g.a)({},e,{members:r.FieldValue.arrayUnion(s)})).then(function(e){var a,t=e.id;r.collection("users").doc(s).update({groupsUid:r.FieldValue.arrayUnion(t),defaultGroup:t}),r.collection("groups").doc(t).update((a={groupUid:t},Object(f.a)(a,"pointsRecord.".concat(s),{firstname:c.firstname,userColor:c.userColor||null,points:0,userUid:s}),Object(f.a)(a,"membersInfo.".concat(s),{firstname:c.firstname,userColor:c.userColor||null,photoURL:"".concat(c.photoURL)||null,userUid:s}),a))}).then(a({type:"SIGNUPGROUP_SUCCESS"})).then(function(){window.location.hash="#/"})}):a({type:"SIGNINGROUP_EMPTY"})}}(a))}}})(ce),le=function(e){function a(){var e,t;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(i.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(r)))).state={groupId:"",groupPassword:""},t.handleChange=function(e){t.setState(Object(f.a)({},e.target.id,e.target.value))},t.handleSubmit=function(e){e.preventDefault(),t.props.signInGroup(t.state)},t}return Object(m.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"formoutter"},r.a.createElement("div",{className:"formwrapper-bottom"},r.a.createElement("form",{className:"signinform",onSubmit:this.handleSubmit},r.a.createElement("label",{className:"label-font",htmlFor:"groupId"},"Group ID"),r.a.createElement("div",{className:"input-row"},r.a.createElement("input",{type:"text",id:"groupId",onChange:this.handleChange})),r.a.createElement("label",{className:"label-font",htmlFor:"groupPassword"},"Password"),r.a.createElement("div",{className:"input-row"},r.a.createElement("input",{type:"password",id:"groupPassword",onChange:this.handleChange})),r.a.createElement("div",{className:"text-row error-holder"},this.props.groupError?r.a.createElement("p",{className:"alert-font"},this.props.groupError):null),r.a.createElement("div",{className:"feature-row"},r.a.createElement("button",{className:"medium-button"},"Join Group")))))}}]),a}(n.Component),ie=Object(h.b)(function(e){return{groupError:e.auth.groupError}},function(e){return{signInGroup:function(a){return e((t=a,function(e,a,n){n.getFirebase;var r=n.getFirestore,s=t.groupId,c=t.groupPassword,o=r(),l=a().firebase.auth.uid,i=a().firebase.profile,u=!1,m=null;0!==s.length&&0!==c.length?o.collection("groups").where("groupId","==",t.groupId).get().then(function(a){0===a.docs.length&&e({type:"SIGNINGROUP_NOTEXIST"}),1===a.docs.length&&a.forEach(function(a){if(a.data()){m=a.id;var n=a.data(),r=n.members,s=n.groupPassword;s!==t.groupPassword&&e({type:"SIGNINGROUP_ERROR"}),s===t.groupPassword&&(-1===r.indexOf(l)?u=!0:e({type:"SIGNINGROUP_ERROR_EXIST"}))}})}).then(function(){var e;u&&l&&o.collection("groups").doc(m).update((e={},Object(f.a)(e,"pointsRecord.".concat(l),{firstname:i.firstname,userColor:i.userColor||null,points:0,userUid:l}),Object(f.a)(e,"members",o.FieldValue.arrayUnion(l)),Object(f.a)(e,"membersInfo.".concat(l),{firstname:i.firstname,userColor:i.userColor||null,photoURL:"".concat(i.photoURL)||null,userUid:l}),e)).catch(function(e){return console.log(e)})}).then(function(){u&&l&&o.collection("users").doc(l).update({groupsUid:o.FieldValue.arrayUnion(m),defaultGroup:m}).catch(function(e){return console.log(e)})}).then(function(){u&&l&&e({type:"SIGNINGROUP_SUCCESS"})}).then(function(){u&&l&&(window.location.hash="#/")}).catch(function(e){return console.log(e)}):e({type:"SIGNINGROUP_EMPTY"})}));var t}}})(le),ue=function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h2",{className:"sub-instruciton-title"},"Join the Homie Group"),r.a.createElement("div",{className:"formoutter"},r.a.createElement("div",{className:"formwrapper-top "},r.a.createElement("div",{className:"link-wrapper"},r.a.createElement(p.c,{className:"signgroup-tab",activeClassName:"signgroup-tab-active",to:"/signgroup/signup"},"Create Group"),r.a.createElement(p.c,{className:"signgroup-tab",activeClassName:"signgroup-tab-active",to:"/signgroup/signin"},"Join Group")))),r.a.createElement(d.b,{path:"/signgroup/signup",component:oe}),r.a.createElement(d.b,{path:"/signgroup/signin",component:ie}))},me=function(e){function a(){return Object(o.a)(this,a),Object(i.a)(this,Object(u.a)(a).apply(this,arguments))}return Object(m.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(p.a,null,r.a.createElement("div",{className:"app"},r.a.createElement(y,null),r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:"/",component:q}),r.a.createElement(d.b,{path:"/signin",component:w}),r.a.createElement(d.b,{exact:!0,path:"/task/:id",component:$}),r.a.createElement(d.b,{exact:!0,path:"/task/memo/:id",component:ne}),r.a.createElement(d.b,{exact:!0,path:"/task/process/:id",component:se}),r.a.createElement(d.b,{path:"/signup",component:function(){return r.a.createElement(S,null)}}),r.a.createElement(d.b,{path:"/post",component:z}),r.a.createElement(d.b,{path:"/signgroup",component:ue}))))}}]),a}(r.a.Component),pe=t(64),de=t(366),he={authError:null,groupError:null},ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"LOGIN_ERROR":return console.log("login error"),Object(g.a)({},e,{authError:"Login failed"});case"LOGIN_SUCCESS":return console.log("login success"),Object(g.a)({},e,{authError:null});case"SIGNOUT_SUCCESS":return console.log("signout success"),e;case"SIGNUP_SUCCESS":return console.log("signup success and login"),Object(g.a)({},e,{authError:null});case"SIGNUP_ERROR":return console.log("signup error"),Object(g.a)({},e,{authError:a.err.message});case"SIGNINGROUP_SUCCESS":return console.log("signin group success"),Object(g.a)({},e,{groupError:null});case"SIGNINGROUP_NOTEXIST":return console.log("This group id was not exist"),Object(g.a)({},e,{groupError:"This group id was not exist"});case"SIGNINGROUP_EMPTY":return console.log("All fields are required"),Object(g.a)({},e,{groupError:"All fields are required"});case"SIGNINGROUP_ERROR":return console.log("The password is incorrect"),Object(g.a)({},e,{groupError:"That was an invalid password"});case"SIGNINGROUP_ERROR_EXIST":return console.log("This member already exist"),Object(g.a)({},e,{groupError:"You have been already joined this group"});case"SIGNUPGROUP_SUCCESS":return console.log("signup group success"),Object(g.a)({},e,{groupError:null});case"SIGNUPGROUP_ERROR":return console.log("signup group error"),Object(g.a)({},e,{groupError:"This group id is already in use by another account"});default:return e}},fe={tasks:[],tasksData:[],taskData:[],unassignedTasksData:[],assignedTasksData:[],pendingTasksData:[],completeTasksData:[],complete:!1,err:!1,errMessage:null},Ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"CREATE_TASK":return console.log("create task",a.task),e;case"TASK_BLANK":return Object(g.a)({},e,{err:!0});case"TASK_BLANK_NOPIC":return Object(g.a)({},e,{err:!0,errMessage:"This task cannot report without a photo."});case"TASK_NOT_ASSIGNED":return Object(g.a)({},e,{err:!0,errMessage:"You are not assigned to this task"});case"RESET_TASK_ALERT":return Object(g.a)({},e,{err:!1,errMessage:null});case"CREATE_TASK_ERROR":return console.log("create task",a.err),e;case"GET_TASKS":return Object(g.a)({},e,{tasksData:a.tasksData,unassignedTasksData:a.unassignedTasksData,assignedTasksData:a.assignedTasksData,pendingTasksData:a.pendingTasksData,completeTasksData:a.completeTasksData,complete:!0});case"GET_TASK":return Object(g.a)({},e,{taskData:a.taskData});case"EMPTY_TASK":return Object(g.a)({},e,{taskData:[]});case"EMPTY_TASKS":return Object(g.a)({},e,{tasksData:[],unassignedTasksData:[],assignedTasksData:[],pendingTasksData:[],completeTasksData:[],complete:!1});default:return e}},be={groups:null,switchError:null,defaultGroupData:null},ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"GROUP_ADD":return Object(g.a)({},e,{groups:a.groupsData});case"SWITCHGROUP_SUCCESS":return e;case"SWITCHGROUP_ERROR":return Object(g.a)({},e,{switchError:a.error});case"GET_GROUP":return Object(g.a)({},e,{defaultGroupData:a.groupData});case"GET_GROUP_EMPTY":return Object(g.a)({},e,{defaultGroupData:null});default:return e}},Ne=t(113),ke=t(114),ye=Object(pe.combineReducers)({auth:ge,task:Ee,group:ve,firestore:Ne.firestoreReducer,firebase:ke.firebaseReducer}),Oe=t(367),we=Object(pe.createStore)(ye,Object(de.composeWithDevTools)(Object(pe.applyMiddleware)(Oe.a.withExtraArgument({getFirestore:Ne.getFirestore,getFirebase:ke.getFirebase})),Object(Ne.reduxFirestore)(B.a),Object(ke.reactReduxFirebase)(B.a,{useFirestoreForProfile:!0,userProfile:"users",attachAuthIsReady:!0,firebaseStateName:"firebase"})));we.firebaseAuthIsReady.then(function(){c.a.render(r.a.createElement(h.a,{store:we},r.a.createElement(me,null)),document.getElementById("root"))})}},[[369,1,2]]]);
//# sourceMappingURL=main.c630c09f.chunk.js.map