(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{182:function(e,t,a){},277:function(e,t,a){e.exports=a(545)},368:function(e,t,a){e.exports=a.p+"static/media/uma.cf3f0cf1.jpg"},545:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(272),o=a.n(s),c=(a(182),a(4)),i=a(5),l=a(7),u=a(6),p=a(8),m=a(12),d=a(51),h=a(9),g=a(11),f=function(){return function(e,t,a){var n=a.getFirebase,r=a.getFirestore,s=n(),o=r(),c=new s.auth.GoogleAuthProvider;s.auth().signInWithPopup(c).then(function(t){console.log(t);var a=t.additionalUserInfo.profile,n=a.name,r=a.given_name,s=a.family_name,c=a.picture,i=a.email;if(t.additionalUserInfo.isNewUser){var l=t.user;console.log(t),console.log(t.user.uid),console.log(r,s,n,c,i),o.collection("users").doc(l.uid).set({firstname:r||"",lastname:s||"",initials:r[0]||""+s[0]||"",photoURL:c,email:i,createAt:o.FieldValue.serverTimestamp()}).then(function(){return window.location.hash="#/signgroup/signup"}).then(function(){return e({type:"LOGIN_SUCCESS"})}).catch(function(t){console.log(t),e({type:"LOGIN_ERROR"},t)})}else o.collection("users").where("email","==",i).get().then(function(t){t.forEach(function(t){var a=t.data().defaultGroup||null;a?(console.log(a),e({type:"LOGIN_SUCCESS"}),window.location.hash="#/"):(console.log(a),e({type:"LOGIN_SUCCESS"}),window.location.hash="#/signgroup/signup")})}),e({type:"LOGIN_SUCCESS"})}).catch(function(t){console.log("error",t),e({type:"LOGIN_ERROR",error:t})})}},E=Object(h.b)(null,function(e){return{signOut:function(){return e(function(e,t,a){(0,a.getFirebase)().auth().signOut().then(function(){e({type:"SIGNOUT_SUCCESS"})}).then(function(){window.location.hash="#/"})})}}})(function(e){var t=e.profile;return r.a.createElement("div",{className:"signinwrapper"},r.a.createElement(m.c,{to:"/post",className:"link-button"},"Launch task"),r.a.createElement(m.c,{to:"/",className:"link-button",onClick:e.signOut},"Log out"),r.a.createElement(m.c,{to:"/",className:"avatar-circle"},t.initials))}),b=function(){return r.a.createElement("div",{className:"signinwrapper"},r.a.createElement(m.c,{to:"/signup",className:"link-button"},"Sign up"),r.a.createElement(m.c,{to:"/signin",className:"link-button "},"Log in"))},v=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.auth,a=e.profile,n=t.uid?r.a.createElement(E,{profile:a}):r.a.createElement(b,null);return r.a.createElement("nav",{className:"navwrapper"},r.a.createElement("div",{className:"container"},r.a.createElement(m.b,{to:"/",className:"brandname"},"HOMIE"),n))}}]),t}(n.Component),N=Object(h.b)(function(e){return{auth:e.firebase.auth,profile:e.firebase.profile}})(v),k=a(14),y=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:""},a.handleChange=function(e){a.setState(Object(k.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),a.props.signIn(a.state)},a.handleGoogleLogin=function(e){a.props.googleLogin()},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.auth,a=e.profile;return t.uid&&!a.defaultGroup?r.a.createElement(d.a,{to:"/signgroup/signup"}):t.uid&&a.defaultGroup?r.a.createElement(d.a,{to:"/"}):void 0}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.authError;e.auth,e.profile;return r.a.createElement("div",{className:"container"},r.a.createElement("h2",{className:"sub-instruciton-title"},"Member Login"),r.a.createElement("div",{className:"formoutter"},r.a.createElement("div",{className:"formwrapper"},r.a.createElement("div",{className:"button-row"},r.a.createElement("button",{onClick:this.handleGoogleLogin,className:"google-button"},r.a.createElement("div",{className:"login-icon"},"G"),r.a.createElement("div",{className:"login-text"},"Continue with Google"))),r.a.createElement("div",{className:"feature-row"},r.a.createElement("div",{className:"hr-box "},r.a.createElement("div",{className:"hr-placer"},"\u2014\u2014\u2014"),r.a.createElement("div",{className:"hr"},"OR"),r.a.createElement("div",{className:"hr-placer"},"\u2014\u2014\u2014"))),r.a.createElement("form",{className:"signinform",onSubmit:this.handleSubmit},r.a.createElement("label",{className:"label-font",htmlFor:"email"},"Email"),r.a.createElement("div",{className:"input-row"},r.a.createElement("input",{type:"email",id:"email",onChange:this.handleChange})),r.a.createElement("label",{className:"label-font",htmlFor:"password"},"Password"),r.a.createElement("div",{className:"input-row"},r.a.createElement("input",{type:"password",id:"password",onChange:this.handleChange})),r.a.createElement("div",{className:"text-row error-holder"},t?r.a.createElement("p",{className:"alert-font"},t):null),r.a.createElement("div",{className:"feature-row"},r.a.createElement("button",{className:"medium-button"},"Log in"))))))}}]),t}(n.Component),O=Object(h.b)(function(e){return{authError:e.auth.authError,auth:e.firebase.auth,profile:e.firebase.profile}},function(e){return{signIn:function(t){return e((a=t,function(e,t,n){(0,n.getFirebase)().auth().signInWithEmailAndPassword(a.email,a.password).then(function(){e({type:"LOGIN_SUCCESS"})}).catch(function(t){e({type:"LOGIN_ERROR",err:t})})}));var a},googleLogin:function(){return e(f())}}})(y),w=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:"",firstName:"",lastName:""},a.handleChange=function(e){a.setState(Object(k.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),a.props.signUp(a.state)},a.handleGoogleLogin=function(e){a.props.googleLogin()},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.auth,a=e.authError;return t.uid?r.a.createElement(d.a,{to:"/"}):r.a.createElement("div",{className:"container"},r.a.createElement("h2",{className:"sub-instruciton-title"},"Start with Homie"),r.a.createElement("div",{className:"formoutter"},r.a.createElement("div",{className:"formwrapper"},r.a.createElement("div",{className:"button-row"},r.a.createElement("button",{onClick:this.handleGoogleLogin,className:"google-button"},r.a.createElement("div",{className:"login-icon"},"G"),r.a.createElement("div",{className:"login-text"},"Sign up with Google"))),r.a.createElement("div",{className:"feature-row"},r.a.createElement("div",{className:"hr-box "},r.a.createElement("div",{className:"hr-placer"},"\u2014\u2014\u2014"),r.a.createElement("div",{className:"hr"},"OR"),r.a.createElement("div",{className:"hr-placer"},"\u2014\u2014\u2014"))),r.a.createElement("form",{className:"signinform",onSubmit:this.handleSubmit},r.a.createElement("label",{className:"label-font",htmlFor:"email"},"Email"),r.a.createElement("div",{className:"input-row"},r.a.createElement("input",{type:"email",id:"email",onChange:this.handleChange})),r.a.createElement("label",{className:"label-font",htmlFor:"password"},"Password"),r.a.createElement("div",{className:"input-row"},r.a.createElement("input",{type:"password",id:"password",onChange:this.handleChange})),r.a.createElement("label",{className:"label-font",htmlFor:"firstName"},"First name"),r.a.createElement("div",{className:"input-row"},r.a.createElement("input",{type:"text",id:"firstName",onChange:this.handleChange})),r.a.createElement("label",{className:"label-font",htmlFor:"lastName"},"Last name"),r.a.createElement("div",{className:"input-row"},r.a.createElement("input",{type:"text",id:"lastName",onChange:this.handleChange})),r.a.createElement("div",{className:"text-row error-holder"},a?r.a.createElement("p",{className:"alert-font"},a):null),r.a.createElement("div",{className:"feature-row"},r.a.createElement("button",{className:"medium-button"},"Sign Up"))))))}}]),t}(n.Component),T=Object(h.b)(function(e){return{auth:e.firebase.auth,authError:e.auth.authError}},function(e){return{signUp:function(t){return e(function(e){return function(t,a,n){var r=n.getFirebase,s=n.getFirestore,o=r(),c=s();o.auth().createUserWithEmailAndPassword(e.email,e.password).then(function(t){return c.collection("users").doc(t.user.uid).set({firstname:e.firstName,lastname:e.lastName,initials:e.firstName[0]+e.lastName[0],email:e.email,createAt:c.FieldValue.serverTimestamp(),photoURL:null})}).then(function(){o.auth().currentUser.updateProfile({displayName:e.firstName,email:e.email,createAt:c.FieldValue.serverTimestamp()})}).then(function(){t({type:"SIGNUP_SUCCESS"})}).then(function(){window.location.hash="#/signgroup/signup"}).catch(function(e){t({type:"SIGNUP_ERROR",err:e})})}}(t))},googleLogin:function(){return e(f())}}})(w),S=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.completeTasks,a=e.pendingTasks,n=e.assignedTasks,s=e.unassignedTasks;e.task;return r.a.createElement("div",{className:"tasklist-wapper"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"empty-card"})),r.a.createElement("h3",{className:"title"},"UNASSIGNED"),this.props.unassignedTasks[0]?r.a.createElement("div",{className:"container "},s&&s.map(function(e){return r.a.createElement(m.b,{to:"/task/"+e.id,key:e.id,task:e},r.a.createElement("div",{className:"task-card"},r.a.createElement("h3",null,e.data.title),r.a.createElement("p",{className:"expirydate"},r.a.createElement("span",{className:"expirydate-title"},"Expiry Date | Wed 25 / 04 / 2019 ")),r.a.createElement("p",null,e.data.content),r.a.createElement("span",{className:"expirydate-title"},"Posted by | ",e.data.author," "),r.a.createElement("span",{className:"expirydate-title"},"Posted at | ",e.data.createAt.toDate().toDateString())))})):r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"empty-card"})),r.a.createElement("h3",{className:"title"},"ASSIGNED"),this.props.assignedTasks[0]?r.a.createElement("div",{className:"container "},n&&n.map(function(e){return r.a.createElement(m.b,{to:"/task/memo/"+e.id,key:e.id,task:e},r.a.createElement("div",{className:"task-card"},r.a.createElement("h3",null,e.data.title),r.a.createElement("p",{className:"expirydate"},r.a.createElement("span",{className:"expirydate-title"},"Expiry Date | Wed 25 / 04 / 2019 ")),r.a.createElement("p",null,e.data.content),r.a.createElement("span",{className:"expirydate-title"},"Posted by | ",e.data.author," "),r.a.createElement("span",{className:"expirydate-title"},"Assigned to | ",e.data.assign.assignedTo," "),r.a.createElement("span",{className:"expirydate-title"},"Posted at | ",e.data.createAt.toDate().toDateString())))})):r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"empty-card"})),r.a.createElement("h3",{className:"title"},"PENDING APPROVAL"),this.props.pendingTasks[0]?r.a.createElement("div",{className:"container "},a&&a.map(function(e){return r.a.createElement(m.b,{to:"/task/process/"+e.id,key:e.id,task:e},r.a.createElement("div",{className:"task-card"},r.a.createElement("h3",null,e.data.title),r.a.createElement("p",{className:"expirydate"},r.a.createElement("span",{className:"expirydate-title"},"Expiry Date | Wed 25 / 04 / 2019 ")),r.a.createElement("p",null,e.data.content),r.a.createElement("span",{className:"expirydate-title"},"Posted by | ",e.data.author," "),r.a.createElement("span",{className:"expirydate-title"},"Assigned to | ",e.data.assign.assignedTo," "),r.a.createElement("span",{className:"expirydate-title"},"Posted at | ",e.data.createAt.toDate().toDateString())))})):r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"empty-card"})),r.a.createElement("h3",{className:"title"},"COMPLETE"),this.props.completeTasks[0]?r.a.createElement("div",{className:"container "},t&&t.map(function(e){return r.a.createElement("div",{className:"task-card",key:e.id},r.a.createElement("h3",null,e.data.title),r.a.createElement("p",{className:"expirydate"},r.a.createElement("span",{className:"expirydate-title"},"Expiry Date | Wed 25 / 04 / 2019 ")),r.a.createElement("p",null,e.data.content),r.a.createElement("span",{className:"expirydate-title"},"Posted by | ",e.data.author," "),r.a.createElement("span",{className:"expirydate-title"},"Assigned to | ",e.data.assign.assignedTo," "),r.a.createElement("span",{className:"expirydate-title"},"Posted at | ",e.data.createAt.toDate().toDateString()))})):r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"empty-card"})))}}]),t}(n.Component),j=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"welcome-wrapper"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"col-2-1"},r.a.createElement("div",{className:"logo-block"},r.a.createElement("div",{className:"logo-holder expand-effect"},r.a.createElement("h2",null,"\u25cf\xb4\u2200`\u25cf")))),r.a.createElement("div",{className:"col-2-1"},r.a.createElement("div",{className:"campaign-block"},r.a.createElement("h1",{className:"campaign-block-title "},"Start from ",r.a.createElement("span",{className:"brand"},"HOMIE"),r.a.createElement("br",null)," Arrange houseworks easier."),r.a.createElement("p",{className:""},"Manage, collaborate and track the houseworks smart.  ")))))}}]),t}(n.Component),D=a(59),C=a(60),G=a(42),U=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleSwitch=function(e){a.props.switchGroup(e),a.props.togglePopup()},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.groupsData;return r.a.createElement("div",{className:"popup"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"close-popup-row",onClick:this.props.togglePopup},r.a.createElement(C.a,{icon:D.c}))),r.a.createElement("div",{className:"option-block"},t&&t.map(function(t){var a=t.groupUid,n=t.groupName;return r.a.createElement("div",{onClick:function(){return e.handleSwitch(a)},className:"option-row ",key:a},r.a.createElement("div",{className:"option-icon"},r.a.createElement(C.a,{icon:D.b})),r.a.createElement("div",{className:"option-text"},n))})),r.a.createElement("div",{className:"u-bottom"},r.a.createElement("div",{className:"container"},r.a.createElement(m.c,{to:"/signgroup/signin"},r.a.createElement("div",{className:"option-row "},r.a.createElement("div",{className:"option-icon"},r.a.createElement(C.a,{icon:D.d})),r.a.createElement("div",{className:"option-text"},"Join new group")))))))}}]),t}(n.Component),P=Object(h.b)(function(e){return{groupsUid:e.firebase.profile.groupsUid,defaultGroup:e.firebase.profile.defaultGroup}},function(e){return{switchGroup:function(t){return e(function(e){return function(t,a,n){var r=n.getFirestore,s=a().firebase.auth.uid;r().collection("users").doc(s).update({defaultGroup:e}).then(t({type:"SWITCHGROUP_SUCCESS"})).catch(function(e){t({type:"SWITCHGROUP_ERROR",error:e})})}}(t))}}})(U),I=a(122),R=a.n(I);a(362),a(366),a(546);R.a.initializeApp({apiKey:"AIzaSyAPYaJoMlKsJ6iepxr8uWw4ZE1aPlH6rvI",authDomain:"homie-2019.firebaseapp.com",databaseURL:"https://homie-2019.firebaseio.com",projectId:"homie-2019",storageBucket:"homie-2019.appspot.com",messagingSenderId:"769792607981"});var x=R.a.storage(),A=function(e){return function(t,a,n){n.getFirebase;var r,s=(0,n.getFirestore)();e?s.collection("tasks").doc(e).get().then(function(e){r={id:e.id,data:e.data()}}).then(function(){t({type:"GET_TASK",taskData:r})}).catch(function(e){console.log(e),t({type:"EMPTY_TASK"})}):t({type:"EMPTY_TASK"})}},F=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={groupPopup:!1},a.togglePopup=function(){a.state.groupPopup||a.props.profile.defaultGroup&&a.props.fetchGroupList(a.props.groupsUid),a.state.groupPopup&&a.props.profile.defaultGroup&&(a.props.fetchTaskList(a.props.auth.uid),a.props.fetchGroupDetails(a.props.auth.uid)),a.setState(function(e){return{groupPopup:!e.groupPopup}})},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.auth.uid&&(this.props.fetchTaskList(this.props.auth.uid),this.props.fetchGroupDetails(this.props.auth.uid))}},{key:"render",value:function(){var e=this.props,t=e.completeTasksData,a=e.pendingTasksData,n=e.assignedTasksData,s=e.unassignedTasksData,o=e.tasksData;return e.auth.uid?r.a.createElement("div",{className:"dashboard-wrapper"},this.state.groupPopup?r.a.createElement(P,{togglePopup:this.togglePopup.bind(this),groupsData:this.props.groupsData}):null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"selected-wrapper"},r.a.createElement("div",{className:"selected-group",onClick:this.togglePopup},this.props.defaultGroupData?this.props.defaultGroupData.groupName:null," ",r.a.createElement(C.a,{icon:D.a})))),r.a.createElement("div",{className:"container"},this.state.groupPopup?null:r.a.createElement(S,{task:o,unassignedTasks:s,assignedTasks:n,pendingTasks:a,completeTasks:t}))):r.a.createElement("div",{className:"landing-wrapper"},r.a.createElement(j,null))}}]),t}(n.Component),_=Object(h.b)(function(e){var t=e.group.defaultGroupData?e.group.defaultGroupData:null,a=e.firebase.auth?e.firebase.auth:null;return{tasks:e.firestore.ordered.tasks,auth:a,groupsUid:e.firebase.profile.groupsUid,groupsData:e.group.groups,profile:e.firebase.profile,defaultGroupData:t,tasksData:e.task.tasksData,unassignedTasksData:e.task.unassignedTasksData,assignedTasksData:e.task.assignedTasksData,pendingTasksData:e.task.pendingTasksData,completeTasksData:e.task.completeTasksData}},function(e){return{fetchGroupList:function(t){return e(function(e){return function(t,a,n){n.getFirebase;var r=n.getFirestore,s=[],o=r();e.map(function(e){return o.collection("groups").doc(e).get().then(function(e){s=[].concat(Object(G.a)(s),[e.data()])}).then(function(){t({type:"GROUP_ADD",groupsData:s})})})}}(t))},fetchTaskList:function(t){return e(function(e){return function(t,a,n){n.getFirebase;var r=(0,n.getFirestore)(),s=[],o=[],c=[],i=[],l=[];r.collection("users").doc(e).get().then(function(e){return e.data().defaultGroup||null}).then(function(e){e&&r.collection("tasks").where("groupUid","==",e).orderBy("lastUpdateAt","desc").get().then(function(e){e.forEach(function(e){s=[].concat(Object(G.a)(s),[{id:e.id,data:e.data()}])})}).then(function(){r.collection("tasks").where("groupUid","==",e).where("status","==","unassigned").orderBy("lastUpdateAt","desc").get().then(function(e){e.forEach(function(e){o=[].concat(Object(G.a)(o),[{id:e.id,data:e.data()}])})}).then(function(){r.collection("tasks").where("groupUid","==",e).where("status","==","assigned").orderBy("lastUpdateAt","desc").get().then(function(e){e.forEach(function(e){c=[].concat(Object(G.a)(c),[{id:e.id,data:e.data()}])})}).then(function(){r.collection("tasks").where("groupUid","==",e).where("status","==","pending").orderBy("lastUpdateAt","desc").get().then(function(e){e.forEach(function(e){i=[].concat(Object(G.a)(i),[{id:e.id,data:e.data()}])})}).then(function(){r.collection("tasks").where("groupUid","==",e).where("status","==","complete").orderBy("lastUpdateAt","desc").get().then(function(e){e.forEach(function(e){console.log(e.data()),l=[].concat(Object(G.a)(l),[{id:e.id,data:e.data()}])})}).then(function(){t({type:"GET_TASKS",tasksData:s,unassignedTasksData:o,assignedTasksData:c,pendingTasksData:i,completeTasksData:l})})})})})})}).catch(function(e){console.log(e),t({type:"EMPTY_TASK"})})}}(t))},fetchGroupDetails:function(t){return e((a=t,function(e,t,n){var r,s=(0,n.getFirestore)();s.collection("users").doc(a).get().then(function(e){return e.data().defaultGroup||null}).then(function(t){t&&s.collection("groups").doc(t).get().then(function(e){r=e.data()}).then(function(){e({type:"GET_GROUP",groupData:r})})})}));var a}}})(F),L=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={title:"",content:"",expiryDate:"",category:"trash"},a.handleBack=function(e){e.preventDefault(),window.location.href="#/"},a.handleChange=function(e){a.setState(Object(k.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),a.props.createTask(a.state)},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h2",{className:"sub-instruciton-title"},"Post a task"),r.a.createElement("form",{className:"signinform",onSubmit:this.handleSubmit},r.a.createElement("label",{className:"label-font",htmlFor:"title"},"Title"),r.a.createElement("div",{className:"task-input-row"},r.a.createElement("input",{type:"test",id:"title",onChange:this.handleChange})),r.a.createElement("label",{className:"label-font",htmlFor:"expiryDate"},"Expiry Date"),r.a.createElement("div",{className:"task-input-row"},r.a.createElement("input",{type:"text",id:"expiryDate",onChange:this.handleChange})),r.a.createElement("label",{className:"label-font",htmlFor:"expiryDate"},"Category"),r.a.createElement("div",{className:"task-input-row"},r.a.createElement("select",{value:this.state.value,name:"",id:"category",onChange:this.handleChange},r.a.createElement("option",{value:"trash"},"Trash"),r.a.createElement("option",{value:"bathroom"},"Bathroom"),r.a.createElement("option",{value:"kitchen"},"Kitchen"),r.a.createElement("option",{value:"floor"},"Floor"),r.a.createElement("option",{value:"other"},"Other"))),r.a.createElement("label",{className:"label-font",htmlFor:"content"},"Description"),r.a.createElement("div",{className:"textarea-row"},r.a.createElement("textarea",{type:"text",id:"content",onChange:this.handleChange})),r.a.createElement("div",{className:"feature-row"},r.a.createElement("button",{onClick:this.handleBack,className:"medium-square-button cancel-button"},"Back"),r.a.createElement("button",{className:"medium-square-button"},"Save"))))}}]),t}(n.Component),B=Object(h.b)(null,function(e){return{createTask:function(t){return e(function(e){return function(t,a,n){n.getFirebase;var r=(0,n.getFirestore)(),s=a().firebase.profile,o=a().firebase.auth.uid;r.collection("tasks").add(Object(g.a)({},e,{author:s.firstname,authorUid:o,groupUid:s.defaultGroup,createAt:new Date,verification:{byOther:[{checkbox:"false",reviewerId:null}],byImage:[{checkbox:"false",url:null}]},assign:{assignedTo:null,assignedAt:null},approve:{verifiedBy:null,verifiedAt:null},lastUpdateAt:r.FieldValue.serverTimestamp(),status:"unassigned"})).then(function(){t({type:"CREATE_TASK",task:e})}).then(function(){window.location.hash="#/"}).catch(function(e){t({type:"CREATE_TASK_ERROR",err:e})})}}(t))}}})(L),V=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleBack=function(e){e.preventDefault(),window.location.href="#/"},a.handleAccept=function(e){a.props.acceptTask(a.props.match.params.id)},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchTask(this.props.match.params.id)}},{key:"componentWillUnmount",value:function(){this.props.fetchTask()}},{key:"render",value:function(){var e=this.props.match.params.id;if(console.log(this.props),this.props.taskdetails.data){var t=this.props.taskdetails.data,a=t.author,n=t.content,s=t.title;return r.a.createElement("div",{className:"taskdetails-wrapper",key:e},r.a.createElement("div",{className:"container "},r.a.createElement("h2",{className:"sub-instruciton-title"},"Accept the Task"),r.a.createElement("div",{className:"task-card"},r.a.createElement("h2",{className:"title"},s),r.a.createElement("p",{className:"expirydate"},"Expiry Date | Wed"),r.a.createElement("p",{className:"expirydate"},"Posted by | ",a),r.a.createElement("p",null,n))),r.a.createElement("div",{className:"feature-row"},r.a.createElement("button",{onClick:this.handleBack,className:"medium-square-button cancel-button"},"Back"),r.a.createElement("button",{onClick:this.handleAccept,className:"medium-square-button"},"Accept")))}return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"bouncing-loader"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)))}}]),t}(n.Component),M=Object(h.b)(function(e,t){return{taskdetails:e.task.taskData?e.task.taskData:null}},function(e){return{fetchTask:function(t){return e(A(t))},acceptTask:function(t){return e(function(e){return function(t,a,n){n.getFirebase;var r=(0,n.getFirestore)(),s=a().firebase.auth.uid,o=a().firebase.profile.firstname,c=a().firebase.profile.defaultGroup;r.collection("tasks").doc(e).update({assign:{assignedAt:r.FieldValue.serverTimestamp(),assignedTo:o,assignedToUid:s},lastUpdateAt:r.FieldValue.serverTimestamp(),status:"assigned"}).then(function(){r.collection("users").doc(s).update(Object(k.a)({},"beAssignedTo.".concat(c),r.FieldValue.arrayUnion(e)))}).then(function(){window.location.hash="#/"})}}(t))}}})(V),W=(a(368),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={files:[],imagePreviewUrl:[],imagefile:null},a.handleBack=function(e){e.preventDefault(),window.location.href="#/"},a.handleChange=function(e){a.setState({files:e.target.files,imagePreviewUrl:URL.createObjectURL(e.target.files[0]),file:e.target.files[0]})},a.handleFinish=function(e){e.preventDefault();var t=a.props.match.params.id,n=a.props.taskdetails.data.assign;a.props.closeTask(t,n,a.state.file)},a.fileInput=r.a.createRef(),a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchTask(this.props.match.params.id)}},{key:"componentWillUnmount",value:function(){this.props.fetchTask()}},{key:"render",value:function(){var e=this.props.match.params.id;if(this.props.taskdetails.data){var t=this.props.taskdetails.data,a=t.assign,n=t.author,s=t.content,o=t.title;return r.a.createElement("div",{className:"taskdetails-wrapper",key:e},r.a.createElement("div",{className:"container "},r.a.createElement("h2",{className:"sub-instruciton-title"},"Report the Task"),r.a.createElement("div",{className:"task-card"},r.a.createElement("h2",{className:"title"},o),r.a.createElement("p",{className:"expirydate"},"Expiry Date | Wed"),r.a.createElement("p",{className:"expirydate"},"Posted by | ",n),r.a.createElement("p",{className:"expirydate"},"Assigned to | ",a.assignedTo),r.a.createElement("p",{className:"expirydate"},"Description"),r.a.createElement("p",null,s),this.state.imagePreviewUrl[0]&&r.a.createElement("div",null,r.a.createElement("p",{className:"expirydate"},"Image attachment"),r.a.createElement("div",{className:"image-row"},r.a.createElement("div",{className:"image-box"},r.a.createElement("div",{className:"image-box-inner"},r.a.createElement("img",{className:"",src:this.state.imagePreviewUrl,alt:""})))))),r.a.createElement("div",{className:"uploadwrapper"},r.a.createElement("form",{action:"",onSubmit:this.handleFinish},r.a.createElement("div",{className:"task-input-row"},r.a.createElement("label",{htmlFor:"imagefile"},"attachment"),r.a.createElement("input",{id:"imagefile",type:"file",onChange:this.handleChange,ref:this.fileInput})),r.a.createElement("div",{className:"feature-row"},r.a.createElement("button",{onClick:this.handleBack,className:"medium-square-button cancel-button"},"Back"),r.a.createElement("button",{className:"medium-square-button"},"Finish"))))))}return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"bouncing-loader"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)))}}]),t}(n.Component)),K=Object(h.b)(function(e,t){return{taskdetails:e.task.taskData?e.task.taskData:null}},function(e){return{fetchTask:function(t){return e(A(t))},closeTask:function(t,a,n){return e(function(e,t,a){return function(n,r,s){s.getFirebase;var o=(0,s.getFirestore)(),c=r().firebase.profile.defaultGroup,i=r().firebase.auth.uid,l=t.assignedToUid;if(i===l)if(a){console.log("OKOK");var u=x.ref("task_images/".concat(e)).child(a.name);u.put(a).then(function(t){console.log(t),u.getDownloadURL().then(function(t){o.collection("tasks").doc(e).update({lastUpdateAt:o.FieldValue.serverTimestamp(),finishAt:o.FieldValue.serverTimestamp(),status:"pending",pendingImgURL:t}).then(function(){var t;o.collection("users").doc(i).update((t={},Object(k.a)(t,"beAssignedTo.".concat(c),o.FieldValue.arrayRemove(e)),Object(k.a)(t,"pending.".concat(c),o.FieldValue.arrayUnion(e)),t))}).then(function(){window.location.hash="#/"})}).catch(function(e){console.log(e),alert("upload failed, please try again")})}).catch(function(e){console.log(e),alert("upload failed, please try again")})}else alert("\u6c92\u6709\u4e0a\u50b3\u5716\u7247");else alert("It is an invalid action")}}(t,a,n))}}})(W),q=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleBack=function(e){e.preventDefault(),window.location.href="#/"},a.handleApprove=function(e){var t=a.props.taskdetails.data.assign;a.props.approveTask(a.props.match.params.id,t)},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchTask(this.props.match.params.id)}},{key:"componentWillUnmount",value:function(){this.props.fetchTask()}},{key:"render",value:function(){var e=this.props.match.params.id;if(this.props.taskdetails.data){var t=this.props.taskdetails.data,a=t.pendingImgURL,n=t.assign,s=t.author,o=(t.content,t.title);return r.a.createElement("div",{className:"taskdetails-wrapper",key:e},r.a.createElement("div",{className:"container "},r.a.createElement("h2",{className:"sub-instruciton-title"},"Approve the Task"),r.a.createElement("div",{className:"task-card"},r.a.createElement("h2",{className:"title"},o),r.a.createElement("p",{className:"expirydate"},"Expiry Date | Wed"),r.a.createElement("p",{className:"expirydate"},"Assigned to | ",n.assignedTo),r.a.createElement("p",{className:"expirydate"},"Posted by | ",s),a?r.a.createElement("div",null,r.a.createElement("p",{className:"expirydate"},"Image attachment"),r.a.createElement("div",{className:"image-row"},r.a.createElement("div",{className:"image-box"},r.a.createElement("div",{className:"image-box-inner"},r.a.createElement("img",{className:"",src:a,alt:""}))))):null)),r.a.createElement("div",{className:"feature-row"},r.a.createElement("button",{onClick:this.handleBack,className:"medium-square-button cancel-button"},"Back"),r.a.createElement("button",{onClick:this.handleApprove,className:"medium-square-button"},"Approve")))}return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"bouncing-loader"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)))}}]),t}(n.Component),H=Object(h.b)(function(e,t){return{taskdetails:e.task.taskData?e.task.taskData:null}},function(e){return{fetchTask:function(t){return e(A(t))},approveTask:function(t,a){return e(function(e,t){return function(a,n,r){r.getFirebase;var s=(0,r.getFirestore)(),o=n().firebase.profile.defaultGroup,c=n().firebase.profile.firstname,i=n().firebase.auth.uid,l=t.assignedToUid;i!==l?(console.log("\u53ef\u4ee5\u5beb"),s.collection("tasks").doc(e).update({lastUpdateAt:s.FieldValue.serverTimestamp(),status:"complete",approve:{approvedAt:s.FieldValue.serverTimestamp(),approvedBy:c,approvedByUid:i}}).then(function(){var t;s.collection("users").doc(l).update((t={},Object(k.a)(t,"pending.".concat(o),s.FieldValue.arrayRemove(e)),Object(k.a)(t,"finish.".concat(o),s.FieldValue.arrayUnion(e)),t))}).then(function(){window.location.hash="#/"})):alert("It is an invalid action")}}(t,a))}}})(q),J=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={groupName:"",groupId:"",groupPassword:""},a.handleChange=function(e){a.setState(Object(k.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),a.props.signUpGroup(a.state)},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"formoutter"},r.a.createElement("div",{className:"formwrapper-bottom"},r.a.createElement("form",{className:"signinform",onSubmit:this.handleSubmit},r.a.createElement("label",{className:"label-font",htmlFor:"groupName"},"Group Name"),r.a.createElement("div",{className:"input-row"},r.a.createElement("input",{type:"text",id:"groupName",onChange:this.handleChange})),r.a.createElement("label",{className:"label-font",htmlFor:"groupId"},"Group ID"),r.a.createElement("div",{className:"input-row"},r.a.createElement("input",{type:"text",id:"groupId",onChange:this.handleChange})),r.a.createElement("label",{className:"label-font",htmlFor:"groupPassword"},"Group Password"),r.a.createElement("div",{className:"input-row"},r.a.createElement("input",{type:"password",id:"groupPassword",onChange:this.handleChange})),r.a.createElement("div",{className:"text-row error-holder"},this.props.groupError?r.a.createElement("p",{className:"alert-font"},this.props.groupError):null),r.a.createElement("div",{className:"feature-row"},r.a.createElement("button",{className:"medium-button"},"Create Group")))))}}]),t}(n.Component),Y=Object(h.b)(function(e){return{auth:e.firebase.auth,groupError:e.auth.groupError}},function(e){return{signUpGroup:function(t){return e(function(e){return function(t,a,n){n.getFirebase;var r=(0,n.getFirestore)(),s=a().firebase.auth.uid,o=!0,c=e.groupName,i=e.groupId,l=e.groupPassword;0!==c.length&&0!==i.length&&0!==l.length?r.collection("groups").where("groupId","==",e.groupId).get().then(function(e){e.forEach(function(e){e.data()&&(o=!1)})}).then(function(){o||t({type:"SIGNUPGROUP_ERROR"}),o&&r.collection("groups").add(Object(g.a)({},e,{members:r.FieldValue.arrayUnion(s)})).then(function(e){var t=e.id;r.collection("users").doc(s).update({groupsUid:r.FieldValue.arrayUnion(t),defaultGroup:t}),r.collection("groups").doc(t).update({groupUid:t})}).then(t({type:"SIGNUPGROUP_SUCCESS"})).then(function(){window.location.hash="#/"})}):t({type:"SIGNINGROUP_EMPTY"})}}(t))}}})(J),z=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={groupId:"",groupPassword:""},a.handleChange=function(e){a.setState(Object(k.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),a.props.signInGroup(a.state)},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"formoutter"},r.a.createElement("div",{className:"formwrapper-bottom"},r.a.createElement("form",{className:"signinform",onSubmit:this.handleSubmit},r.a.createElement("label",{className:"label-font",htmlFor:"groupId"},"Group ID"),r.a.createElement("div",{className:"input-row"},r.a.createElement("input",{type:"text",id:"groupId",onChange:this.handleChange})),r.a.createElement("label",{className:"label-font",htmlFor:"groupPassword"},"Password"),r.a.createElement("div",{className:"input-row"},r.a.createElement("input",{type:"password",id:"groupPassword",onChange:this.handleChange})),r.a.createElement("div",{className:"text-row error-holder"},this.props.groupError?r.a.createElement("p",{className:"alert-font"},this.props.groupError):null),r.a.createElement("div",{className:"feature-row"},r.a.createElement("button",{className:"medium-button"},"Join Group")))))}}]),t}(n.Component),X=Object(h.b)(function(e){return{groupError:e.auth.groupError}},function(e){return{signInGroup:function(t){return e((a=t,function(e,t,n){n.getFirebase;var r=n.getFirestore,s=a.groupId,o=a.groupPassword,c=r(),i=t().firebase.auth.uid,l=!1,u=null;0!==s.length&&0!==o.length?c.collection("groups").where("groupId","==",a.groupId).get().then(function(t){0===t.docs.length&&e({type:"SIGNINGROUP_NOTEXIST"}),1===t.docs.length&&t.forEach(function(t){if(t.data()){u=t.id;var n=t.data().groupPassword;n!==a.groupPassword&&e({type:"SIGNINGROUP_ERROR"}),n===a.groupPassword&&(l=!0)}})}).then(function(){l&&i&&c.collection("groups").doc(u).update({members:c.FieldValue.arrayUnion(i)}).then(function(){c.collection("users").doc(i).update({groupsUid:c.FieldValue.arrayUnion(u),defaultGroup:u})})}).then(function(){l&&i&&e({type:"SIGNINGROUP_SUCCESS"})}).then(function(){l&&i&&(window.location.hash="#/")}):e({type:"SIGNINGROUP_EMPTY"})}));var a}}})(z),Z=function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h2",{className:"sub-instruciton-title"},"Join the Homie Group"),r.a.createElement("div",{className:"formoutter"},r.a.createElement("div",{className:"formwrapper-top "},r.a.createElement("div",{className:"link-wrapper"},r.a.createElement(m.c,{className:"signgroup-tab",activeClassName:"signgroup-tab-active",to:"/signgroup/signup"},"Create Group"),r.a.createElement(m.c,{className:"signgroup-tab",activeClassName:"signgroup-tab-active",to:"/signgroup/signin"},"Join Group")))),r.a.createElement(d.b,{path:"/signgroup/signup",component:Y}),r.a.createElement(d.b,{path:"/signgroup/signin",component:X}))},Q=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(m.a,null,r.a.createElement("div",{className:"app"},r.a.createElement(N,null),r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:"/",component:_}),r.a.createElement(d.b,{path:"/signin",component:O}),r.a.createElement(d.b,{exact:!0,path:"/task/:id",component:M}),r.a.createElement(d.b,{exact:!0,path:"/task/memo/:id",component:K}),r.a.createElement(d.b,{exact:!0,path:"/task/process/:id",component:H}),r.a.createElement(d.b,{path:"/signup",component:function(){return r.a.createElement(T,null)}}),r.a.createElement(d.b,{path:"/post",component:B}),r.a.createElement(d.b,{path:"/signgroup",component:Z}))))}}]),t}(r.a.Component),$=a(41),ee=a(275),te={authError:null,groupError:null},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_ERROR":return console.log("login error"),Object(g.a)({},e,{authError:"Login failed"});case"LOGIN_SUCCESS":return console.log("login success"),Object(g.a)({},e,{authError:null});case"SIGNOUT_SUCCESS":return console.log("signout success"),e;case"SIGNUP_SUCCESS":return console.log("signup success and login"),Object(g.a)({},e,{authError:null});case"SIGNUP_ERROR":return console.log("signup error"),Object(g.a)({},e,{authError:t.err.message});case"SIGNINGROUP_SUCCESS":return console.log("signin group success"),Object(g.a)({},e,{groupError:null});case"SIGNINGROUP_NOTEXIST":return console.log("This group id was not exist"),Object(g.a)({},e,{groupError:"This group id was not exist"});case"SIGNINGROUP_EMPTY":return console.log("All fields are required"),Object(g.a)({},e,{groupError:"All fields are required"});case"SIGNINGROUP_ERROR":return console.log("The password is incorrect"),Object(g.a)({},e,{groupError:"That was an invalid password"});case"SIGNUPGROUP_SUCCESS":return console.log("signup group success"),Object(g.a)({},e,{groupError:null});case"SIGNUPGROUP_ERROR":return console.log("signup group error"),Object(g.a)({},e,{groupError:"This group id is already in use by another account"});default:return e}},ne={tasks:[],tasksData:[],taskData:[],unassignedTasksData:[],assignedTasksData:[],pendingTasksData:[],completeTasksData:[]},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_TASK":return console.log("create task",t.task),e;case"CREATE_TASK_ERROR":return console.log("create task",t.err),e;case"GET_TASKS":return console.log("get all task data"),Object(g.a)({},e,{tasksData:t.tasksData,unassignedTasksData:t.unassignedTasksData,assignedTasksData:t.assignedTasksData,pendingTasksData:t.pendingTasksData,completeTasksData:t.completeTasksData});case"GET_TASK":return console.log("get the specific task data"),Object(g.a)({},e,{taskData:t.taskData});case"EMPTY_TASK":return Object(g.a)({},e,{taskData:[]});default:return e}},se={groups:null,switchError:null,defaultGroupData:null},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GROUP_ADD":return Object(g.a)({},e,{groups:t.groupsData});case"SWITCHGROUP_SUCCESS":return e;case"SWITCHGROUP_ERROR":return Object(g.a)({},e,{switchError:t.error});case"GET_GROUP":return Object(g.a)({},e,{defaultGroupData:t.groupData});default:return e}},ce=a(80),ie=a(81),le=Object($.combineReducers)({auth:ae,task:re,group:oe,firestore:ce.firestoreReducer,firebase:ie.firebaseReducer}),ue=a(276),pe=Object($.createStore)(le,Object(ee.composeWithDevTools)(Object($.applyMiddleware)(ue.a.withExtraArgument({getFirestore:ce.getFirestore,getFirebase:ie.getFirebase})),Object(ce.reduxFirestore)(R.a),Object(ie.reactReduxFirebase)(R.a,{useFirestoreForProfile:!0,userProfile:"users",attachAuthIsReady:!0,firebaseStateName:"firebase"})));pe.firebaseAuthIsReady.then(function(){o.a.render(r.a.createElement(h.a,{store:pe},r.a.createElement(Q,null)),document.getElementById("root"))})}},[[277,1,2]]]);
//# sourceMappingURL=main.26c1b468.chunk.js.map